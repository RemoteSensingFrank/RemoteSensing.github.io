<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>吴蔚</title>
  
  <subtitle>生命不息，折腾不止！</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.wuweiblog.com/"/>
  <updated>2020-03-03T07:06:37.352Z</updated>
  <id>http://www.wuweiblog.com/</id>
  
  <author>
    <name>John Doe Thanks the author of the theme</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>tensorflow-三十弹</title>
    <link href="http://www.wuweiblog.com/2020/03/03/tensorflow-%E4%B8%89%E5%8D%81%E5%BC%B9/"/>
    <id>http://www.wuweiblog.com/2020/03/03/tensorflow-三十弹/</id>
    <published>2020-03-03T01:06:38.000Z</published>
    <updated>2020-03-03T07:06:37.352Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;在上一部分中我们只描述了深度学习的一些基本问题，如梯度消失，激活函数等问题，剩下两个部分，分别为tensorflow2.x的使用以及关于GAN的一些知识与实践，首先介绍一下关于tensorflow2.x 以及其集成的kersa的知识，以前的时候写神经网络总是通过tensorflow原生直接写，虽然也提供了自动求导方式，但是实践起来总是有点麻烦，而使用kersa之后感觉惊为天人，网络的构建过程得到了极大的简化，使得构建深度学习模型变成了一个工程问题而非科学问题了。<br>&nbsp;&nbsp;&nbsp;&nbsp;下面我们首先介绍一下<strong>tensorflow2.0</strong>，首先安装过程，目前来说tensorflow2.0的安装不支持python3.7，我在python3.6 ubuntu18.04 LST版本下安装，我本机系统式win10，采用WSL的方式安装了linux的控制台环境，反正目前也不需要图形化环境，所以采用此种方式最为简单方便，安装在linux下安装tensorflow2.0的环境相对还是比较简单，在连接网络的条件下<a href="https://zhuanlan.zhihu.com/p/61472293" target="_blank" rel="noopener">参考</a>进行就可以了。安装完成之后我们就可以开始进行tensorflow代码的编写了，原生的tensorflow代码实际上区别不大，我们主要介绍一下关于kersa代码的一些特点：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">model = tf.keras.Sequential()</span><br><span class="line">model.add(layers.Conv2D(<span class="number">8</span>,(<span class="number">5</span>,<span class="number">5</span>), activation=<span class="string">'relu'</span>,input_shape=(<span class="number">28</span>,<span class="number">28</span>,<span class="number">1</span>)))</span><br><span class="line">model.add(layers.Conv2D(<span class="number">16</span>,(<span class="number">5</span>,<span class="number">5</span>),activation=<span class="string">'relu'</span>,input_shape=(<span class="number">28</span>,<span class="number">28</span>,<span class="number">1</span>)))</span><br><span class="line">model.add(layers.MaxPool2D(pool_size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line">model.add(layers.Flatten())</span><br><span class="line">model.add(layers.Dense(<span class="number">128</span>, activation=<span class="string">'relu'</span>))<span class="comment">#784向量映射到128</span></span><br><span class="line">model.add(layers.Dropout(<span class="number">0.2</span>))  <span class="comment">#dropout trick 避免模型过于依赖某些神经元避免在分类过程中</span></span><br><span class="line">model.add(layers.Dense(<span class="number">10</span>, activation=<span class="string">'softmax'</span>))</span><br><span class="line">model.compile(optimizer=<span class="string">'adam'</span>,</span><br><span class="line">                loss=<span class="string">'sparse_categorical_crossentropy'</span>,</span><br><span class="line">                metrics=[<span class="string">'accuracy'</span>])</span><br></pre></td></tr></table></figure></p><p>以上代码构建了一个简单的深度神经网络的学习模型，从以上代码中有几个函数，我们进行详细说明：</p><ul><li>Sequential 构建一个序贯模型：序贯模型是相对于循环网络来说的，输入经过处理到输出，而不需要循环输入的网络模型就成为序贯模型；</li><li>Conv2D：卷积层，这个是CNN网络的典型结构，对网络做一个卷积操作，卷积层包括卷积核大小以及卷积特征数；</li><li>MaxPool2D：池化层，实际上池化操作在以前的部分也有，就是一个求池化核大小内的最大值的区别；</li><li>Flatten：压平，将一个n维向量转换为一维的过程；</li><li>Dense：全连接层</li><li>compile：实际上这个就是定义网络的目标函数，损失函数以及优化方法的定义，通过compile构成一个能够反向传播的网络，在compile之后就可以进行数据优化的训练过程了；</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;从上面一小段代码可以看出，通过kersa将神经网简单的分成了几个部分，包括：数据准备（数据读取和数据格式转换），模型构建（根据数学原理和神经网络结构构建模型），模型训练。为了能够更加清楚的说明这个过程，编写了一个简单的网络模型作为参考：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">@Descripttion: tensorflow 2.0 kersa学习第一课</span></span><br><span class="line"><span class="string">@version: 1.0版本</span></span><br><span class="line"><span class="string">@Author: Frank.Wu</span></span><br><span class="line"><span class="string">@Date: 2020-02-26 09:50:02</span></span><br><span class="line"><span class="string">@LastEditors: Frank.Wu</span></span><br><span class="line"><span class="string">@LastEditTime: 2020-03-03 11:33:48</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment">#coding = utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> tensorflow.keras <span class="keyword">import</span> layers, optimizers, Sequential,datasets</span><br><span class="line"><span class="keyword">import</span>  os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(tf.__version__)</span><br><span class="line">print(tf.keras.__version__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(os.environ.keys())</span></span><br><span class="line"><span class="comment"># 设置后台打印日志等级 避免后台打印一些无用的信息</span></span><br><span class="line">os.environ[<span class="string">'TF_CPP_MIN_LOG_LEVEL'</span>] = <span class="string">'2'</span></span><br><span class="line"></span><br><span class="line"><span class="string">''' </span></span><br><span class="line"><span class="string">    加载mnist数据，判断本地是否有数据，</span></span><br><span class="line"><span class="string">    如果有则加载，否则加载在线数据</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_mnist_data</span><span class="params">()</span>:</span></span><br><span class="line">    pathLocal = <span class="string">'./data/mnist/mnist.npz'</span></span><br><span class="line">    <span class="keyword">if</span>(os.path.exists(pathLocal)):</span><br><span class="line">        f = np.load(pathLocal)</span><br><span class="line">        x_train, y_train = f[<span class="string">'x_train'</span>], f[<span class="string">'y_train'</span>]</span><br><span class="line">        x_test, y_test = f[<span class="string">'x_test'</span>], f[<span class="string">'y_test'</span>]</span><br><span class="line">        f.close()</span><br><span class="line">        <span class="keyword">return</span> (x_train, y_train), (x_test, y_test)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> datasets.mnist.load_data()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">    构建模型:</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment">#1.mnist 全连接模型</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mnist_full_model</span><span class="params">()</span>:</span></span><br><span class="line">    model = tf.keras.Sequential()</span><br><span class="line">    model.add(layers.Flatten(input_shape=(<span class="number">28</span>, <span class="number">28</span>)))<span class="comment">#将28*28 转换到一维</span></span><br><span class="line">    model.add(layers.Dense(<span class="number">128</span>, activation=<span class="string">'relu'</span>))<span class="comment">#784向量映射到128</span></span><br><span class="line">    model.add(layers.Dropout(<span class="number">0.2</span>))  <span class="comment">#dropout trick 避免模型过于依赖某些神经元避免在分类过程中</span></span><br><span class="line">    model.add(layers.Dense(<span class="number">10</span>, activation=<span class="string">'softmax'</span>))</span><br><span class="line">    model.compile(optimizer=<span class="string">'adam'</span>,</span><br><span class="line">                  loss=<span class="string">'sparse_categorical_crossentropy'</span>,</span><br><span class="line">                  metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    <span class="comment">#将模型输出</span></span><br><span class="line">    keras.utils.plot_model(model, to_file=<span class="string">'./data/1_model.png'</span>, show_shapes=<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment">#plot(model, to_file='./data/1_model.png', show_shapes=True)</span></span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mnist_cnn_model</span><span class="params">()</span>:</span></span><br><span class="line">    model = tf.keras.Sequential()</span><br><span class="line">    model.add(layers.Conv2D(<span class="number">8</span>,(<span class="number">5</span>,<span class="number">5</span>), activation=<span class="string">'relu'</span>,input_shape=(<span class="number">28</span>,<span class="number">28</span>,<span class="number">1</span>)))</span><br><span class="line">    model.add(layers.Conv2D(<span class="number">16</span>,(<span class="number">5</span>,<span class="number">5</span>),activation=<span class="string">'relu'</span>,input_shape=(<span class="number">28</span>,<span class="number">28</span>,<span class="number">1</span>)))</span><br><span class="line">    model.add(layers.MaxPool2D(pool_size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line">    model.add(layers.Flatten())</span><br><span class="line">    model.add(layers.Dense(<span class="number">128</span>, activation=<span class="string">'relu'</span>))<span class="comment">#784向量映射到128</span></span><br><span class="line">    model.add(layers.Dropout(<span class="number">0.2</span>))  <span class="comment">#dropout trick 避免模型过于依赖某些神经元避免在分类过程中</span></span><br><span class="line">    model.add(layers.Dense(<span class="number">10</span>, activation=<span class="string">'softmax'</span>))</span><br><span class="line">    model.compile(optimizer=<span class="string">'adam'</span>,</span><br><span class="line">                  loss=<span class="string">'sparse_categorical_crossentropy'</span>,</span><br><span class="line">                  metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">    <span class="comment">#将模型输出</span></span><br><span class="line">    keras.utils.plot_model(model, to_file=<span class="string">'./data/1_model.png'</span>, show_shapes=<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment">#plot(model, to_file='./data/1_model.png', show_shapes=True)</span></span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"> </span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">    通过数据进行训练</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment">#1.mnist 数据集进行训练</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mnist_fit_evaluate</span><span class="params">(model,x_train,y_train,x_test,y_test)</span>:</span></span><br><span class="line">    model.fit(x_train, y_train,batch_size=<span class="number">64</span>, epochs=<span class="number">5</span>)</span><br><span class="line">    model.evaluate(x_test,  y_test, verbose=<span class="number">2</span>)</span><br><span class="line">    model.save(<span class="string">'./data/1_mnist.h5'</span>)</span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">    全流程</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mnist_full</span><span class="params">()</span>:</span></span><br><span class="line">    pathModel = <span class="string">'./data/1_mnist.h5'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(os.path.exists(pathModel)):</span><br><span class="line">        model = keras.models.load_model(pathModel)</span><br><span class="line">        <span class="keyword">return</span> model</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        model = mnist_cnn_model()</span><br><span class="line">        (x_train, y_train), (x_test, y_test) = load_mnist_data()</span><br><span class="line">        x_train, x_test=x_train/<span class="number">255.0</span>, x_test/<span class="number">255.0</span></span><br><span class="line">        x_train = x_train.reshape(<span class="number">60000</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">        x_test = x_test.reshape(<span class="number">10000</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">        mnist_fit_evaluate(model,x_train,y_train,x_test,y_test)</span><br><span class="line">        <span class="keyword">return</span> model</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">mnist_full()</span><br></pre></td></tr></table></figure></p><p>以上代码数据采用的是mnist数据，因为提供的mnist数据加载比较慢，所以我们从网上下载了数据并对数据读取代码进行了略微的修改。数据读取完成后得到训练样本集和测试样本集，训练样本集模型层编写了两种模型，包括简单的神经网络模型以及深度神经网络模型，对两种模型进行了训练，并查看训练结果的准确性。另外keras还提供了将模型结构输出的函数，可以将模型结构保存为图片。如果大家有兴趣可以在tensorflow2.0环境下运行以上代码进行测试，以便进一步了解keras的数据模型。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在上一部分中我们只描述了深度学习的一些基本问题，如梯度消失，激活函数等问题，剩下两个部分，分别为tensorflow2.x的使用以及关于GAN的一些知识与实践，首先介绍一下关于tensorflow2.x 以及其集成的kersa
      
    
    </summary>
    
      <category term="学习" scheme="http://www.wuweiblog.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="tensorflow学习" scheme="http://www.wuweiblog.com/tags/tensorflow%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>tensorflow-第二十九弹</title>
    <link href="http://www.wuweiblog.com/2020/02/28/tensorflow-%E4%BA%8C%E5%8D%81%E4%B9%9D%E5%BC%B9/"/>
    <id>http://www.wuweiblog.com/2020/02/28/tensorflow-二十九弹/</id>
    <published>2020-02-28T06:14:07.000Z</published>
    <updated>2020-03-01T08:09:09.985Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;很久没有更新这个系列了，不知不觉tensorflow也更新到了2.x版，新版得tenforflow相比于1.x的版本，有着更快的训练速度，同时内部集成了keras使得网络的构建和训练变成了一件及其简单的事情，因此在构建网络上并没有什么可以细说的，剩下的工作我们会把代码的编写放在后一步，着重的说明各种网络的构建模式以及机器学习中的一些细节问题，以及导致这些问题的原因，由此更深入的了解如何通过机器学习对网络进行调优。<br>&nbsp;&nbsp;&nbsp;&nbsp;我打算花一下午的时间总结一下主要包括几个部分的问题：</p><ul><li>第一个就是激活函数的问题：激活函数的类型，为什么需要激活函数，以及如何判断激活函数的好坏；</li><li>第二个是keras的问题，这个工具以前没有用过，所以打算用一下，顺便介绍一下其特点；</li><li>第三个是关于GAN的问题，在GAN中有一个重要的问题是生成器与识别器如何联合调优的问题，这个需要仔细分析；</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;首先我们来谈一下什么是激活函数：<a href="https://baike.baidu.com/item/%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0/2520792?fr=aladdin" target="_blank" rel="noopener">在神经元中，输入的 inputs 通过加权，求和后，还被作用了一个函数，这个函数就是激活函数。引入激活函数是为了增加神经网络模型的非线性。没有激活函数的每层都相当于矩阵相乘。就算你叠加了若干层之后，无非还是个矩阵相乘罢了。</a>以上这句话引用自百度百科，实际上意思就是说对于神经网络来说，一个神经元的输入实际上就是前面一层神经元值得线性组合，如果不做任何处理，则神经网络就是多个线性函数组合，也就是说就算添加了隐藏层，最后得输出也只是最原始得输入得线性组合（证明），因此中间的隐藏层存在的意义就很有有限，而引入激活函数后，通过激活函数做一个非线性映射，使得神经网络能够对任何函数进行逼近。在了解激活函数后我们需要进一步的了解梯度消失问题：<img src="https://blogimage-1251632003.cos.ap-guangzhou.myqcloud.com/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%A2%AF%E5%BA%A6%E6%B6%88%E5%A4%B1.png" alt="梯度比较1"><br>上图中的黄色矩形柱的高度代表了梯度的变化的大小，从中我们可以看到layer2中的梯度变化明显大于layer1，下面需要通过数学的方法进行证明:<br>&nbsp;&nbsp;&nbsp;&nbsp;假设$\delta^l_j= \partial C /\partial b^l_j$表示第l层第j个神经元的梯度，假设$\delta^1$为第一层的梯度向量，$\delta^2$为第二层的梯度向量，通过向量长度能够近似的表示某一层的学习速率，则不同层的学习速率曲线如下图：<br><img src="https://blogimage-1251632003.cos.ap-guangzhou.myqcloud.com/%E4%B8%8D%E5%90%8C%E5%B1%82%E5%AD%A6%E4%B9%A0%E9%80%9F%E7%8E%87.png" alt="梯度比较2"><br>从上图可以看到，越靠近输出层的隐藏层具有越高的学习速率，这个就是我们所说的梯度消失的问题，神经网络层数越多，梯度下降越明显，神经网络层数过多可能导致开始的神经网络梯度变化很小，收敛困难，同时梯度消失的问题又导致对于激活函数响应的问题，这就是我们提到的<a href="http://neuralnetworksanddeeplearning.com/chap5.html" target="_blank" rel="noopener">梯度消失问题</a>。<br>&nbsp;&nbsp;&nbsp;&nbsp;上面的说明都是从实验证明上体现了梯度消失的问题，下面我们对梯度消失的原因进行详细说明:<br><img src="https://blogimage-1251632003.cos.ap-guangzhou.myqcloud.com/%E6%A2%AF%E5%BA%A6%E6%B6%88%E5%A4%B1%E8%AF%B4%E6%98%8E.png" alt="梯度消失3"><br>上图中我们构造了一个最简单的神经网络，每一层只有一个神经元，一般来说权重$w$都小于1，实际上对于激活函数（假设激活函数为sigmoid函数），则sigmoid函数的梯度最大值为0.25，则$|w_j \sigma’(z_j)| &lt; 1/4$由此可得，梯度存在指树下降趋势，由此导致梯度消失。<br>&nbsp;&nbsp;&nbsp;&nbsp;在了解了梯度消失后我们就可以介绍一下<a href="https://blog.csdn.net/tyhj_sf/article/details/79932893" target="_blank" rel="noopener">各种激活函数了</a>实际上主要介绍三类，分别为sigmoid函数，tanh函数以及ReLU函数。对于不同的激活函数我们主要看几点：</p><ul><li>1.激活函数是否对整个实数空间适用（映射整个实数空间）；</li><li>2.激活函数的导数情况；</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;其中第一点是对激活函数的要求，第二点是判断激活函数好坏的特征，这三类激活函数的函数特征在<a href="https://blog.csdn.net/tyhj_sf/article/details/79932893" target="_blank" rel="noopener">网上很多资料</a>上都有,我们就这几种函数来说明他们之间的优劣和各自的特点。首先是sigmoid函数，sigmoid函数在深度学习早期是使用很广泛的函数，在我们刚刚学习深度学习的时候一般是以此函数作为模板的，这个函数满足我们第一点的情况，对于$[-\infty,+\infty]$区间都能够映射到$[-1,1]$之间，且求导简单。但是如我们以上分析的sigmoid函数存在几个问题，第一个：梯度消失的问题，在值极小的情况下sigmoid函数梯度趋近于0，由此导致在多层神经网络中收敛缓慢。特别是在深度神经网络中，梯度消失现象更加明显。第二：sigmoid输出的数学期望不为0，由此导致每一层神经元在传递过程中得到上一层的非0均值的信号叠加的输入。针对第二个问题，有学者引入了tanh函数，tanh函数与sigmoid函数十分相似，只是均值为0。针对第一个问题，有学者引入了ReLU函数，ReLU函数简单，计算极快，但是ReLU的问题在于非0均值以及对于小于0的输入，梯度都为0，神经元不激活。针对ReLU的问题，有很多学者对ReLU函数进行了改进，得到了一系列ReLU函数的变体，在这篇文章中就不进行详细的讨论，在后续文章中会陆续更新关于tensorflow2.0以及一些其他典型网络的相关实现。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;很久没有更新这个系列了，不知不觉tensorflow也更新到了2.x版，新版得tenforflow相比于1.x的版本，有着更快的训练速度，同时内部集成了keras使得网络的构建和训练变成了一件及其简单的事情，因此在构建网络上并
      
    
    </summary>
    
      <category term="学习" scheme="http://www.wuweiblog.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="tensorflow学习" scheme="http://www.wuweiblog.com/tags/tensorflow%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>活得怎么样</title>
    <link href="http://www.wuweiblog.com/2020/02/18/%E6%B4%BB%E5%BE%97%E6%80%8E%E4%B9%88%E6%A0%B7/"/>
    <id>http://www.wuweiblog.com/2020/02/18/活得怎么样/</id>
    <published>2020-02-18T07:50:55.000Z</published>
    <updated>2020-02-18T08:34:36.271Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;本来昨天应该写的，但是昨天晚上跟老婆吵架所有的事情都没有心思去做，昨晚也差不多一宿没有睡好，到现在人还是有点不清醒，到现在才能整理思路说一下昨天看的这部电影《遗愿清单》，这部在豆瓣上评分很高的电影也确实值得我们去看，去体会，去思考。<br>&nbsp;&nbsp;&nbsp;&nbsp;剧情很简单，两个身患绝症的老人，在生命的最后关头决定疯狂一把，在生命的最后一个月中去做那些自己想做却又没有能够做得了得事情。看起来感觉就像是《假如再给我三天光明》得升级版，实际上电影得表现力可能要强的多。我们从出生开始实际上就面临着一个问题，那就是我们如何面临死亡以及如何度过我们这一生的问题。我们一直以来有很多角色，学生、子女、丈夫/妻子、员工、老板….每一个角色都有一套评价标准，我们需要当一个好学生，做一个孝顺的子女，做一个好丈夫/妻子，在公司做一个好职员为公司创造价值，做一个好老板好好经营自己的企业。我们在这么多的角色中辗转，然后忘记了一个最重要的角色，那就是我们自己。实际上我们首先是我们自己，然后才是我们需要扮演的角色，而很多人在扮演这些角色的过程中把自己给丢掉了。<br>&nbsp;&nbsp;&nbsp;&nbsp;如果我们的生命只剩下最后三个月我们会去做些什么？也许这个问题只有当我们垂垂老矣的时候才能回答得上来吧，在这个世界上我们很难一辈子只为自己活，只有当我们扮演好了我们生活中的每一个角色之后我们才能够真正的做自己吧，有时候觉得人这一生真的很讽刺，如果把这个世界比作一个大舞台，实际上每个人都只是一个演员，一个永不休止的演员，也许只有在夜深人静的时候我们坐在床上才能真正思考到底我自己是谁这个问题吧！不知道是什么原因，在这两年以来我一直都并不害怕死亡，有时候甚至希望死亡能够快点到来，但是我又不想经历死亡的痛苦，我多么想一觉睡过去，然后第二天不再醒来。<br>&nbsp;&nbsp;&nbsp;&nbsp;有人说过众生皆苦，也有人问生活一直如此艰辛还是只有偶尔如此，有人失去一切仍然坚持活着，有人充满希望的躺在了铁轨上。有一个很重要的问题是我们的生活到底有什么意义，或者说是因为我们的角色给我们带来了生活的意义，或者说活着本来就是意义。所以实际上这就是宗教让我们觉得矛盾的地方，如果死后能进天堂，如果死后能够进去极乐世界那为什么还要我们忍受活着的痛苦呢？为什么所有宗教都不提倡自杀呢？是怕天堂的人太多了么？或者说实际上我们身上本来就有很强的动物性，所以我们只是本能的有着对死亡的恐惧，以及将基因传承下去的本能，或者说生存的意义就是对死亡的恐惧？实际上死亡如何也没有人知道，所以我们的恐惧只是对未知的恐惧？所以随着年龄的增加我们越来越恐惧未知，所以我们也越来越恐惧死亡？<br>&nbsp;&nbsp;&nbsp;&nbsp;絮絮叨叨说了这么多，回到电影本身上来，其实剧情很简单，但是每一个对生活的的疑问都值得我们深思。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;本来昨天应该写的，但是昨天晚上跟老婆吵架所有的事情都没有心思去做，昨晚也差不多一宿没有睡好，到现在人还是有点不清醒，到现在才能整理思路说一下昨天看的这部电影《遗愿清单》，这部在豆瓣上评分很高的电影也确实值得我们去看，去体会，去
      
    
    </summary>
    
      <category term="影评" scheme="http://www.wuweiblog.com/categories/%E5%BD%B1%E8%AF%84/"/>
    
    
      <category term="遗愿清单，影评" scheme="http://www.wuweiblog.com/tags/%E9%81%97%E6%84%BF%E6%B8%85%E5%8D%95%EF%BC%8C%E5%BD%B1%E8%AF%84/"/>
    
  </entry>
  
  <entry>
    <title>浮生偷闲</title>
    <link href="http://www.wuweiblog.com/2020/02/03/%E6%B5%AE%E7%94%9F%E5%81%B7%E9%97%B2/"/>
    <id>http://www.wuweiblog.com/2020/02/03/浮生偷闲/</id>
    <published>2020-02-03T03:49:41.000Z</published>
    <updated>2020-02-03T03:51:35.812Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;emm因为疫情的原因导致这个年一直都在家度过了，为了打发闲暇的时间所以宅在家的时候就一直在看电影，把以前看不下去的电影、以前没有看的电影、以前很喜欢的电影统统都准备翻出来看，最近好像是事情也比较多，所以看些电影也算放松一下吧，昨天主要看了《这个杀手不太冷》以及《指环王》系列的电影。在这里我不太想介绍剧情，毕竟是老片子，而且对于《指环王》系列的电影我也只是看了电影而已，所以也没法分析剧情，只是谈谈自己的体会罢了。<br>&nbsp;&nbsp;&nbsp;&nbsp;相比之下我更喜欢《这个杀手不太冷》而不是大家都喜欢的《指环王》系列，大家都说艺术家创造出艺术作品后这个作品就属于大家了，一千个读者有一千个哈姆雷特，从这部电影中我看到了救赎～，里昂作为一个杀手，他是专业的，他具有极高的专业素养，他冷静，镇定，身体强健；他无任何不良嗜好，甚至除了把杀手当作工作以外没有任何兴趣爱好，唯一陪伴他的只有一株绿植。作为一个杀手，他完美得无可挑剔，可是作为一个人，他是不完整的，然而上天把玛蒂尔带到了他的身边，玛蒂尔从小生活环境十分糟糕，是一个敏感、早熟、缺爱的人。这天玛蒂尔的父亲因为私藏了别人的毒品全家惨遭杀害，在危机关头里昂救下了她，于是她和里昂还有里昂的那株绿植生活在了一起，在一起生活的过程中，里昂的内心逐渐被融化，他变得快乐起来。玛蒂尔仿佛是他生活中的色彩，而与里昂的相处过程中玛蒂尔感受到了爱与关怀。<br>&nbsp;&nbsp;&nbsp;&nbsp;与玛蒂尔的相处过程中里昂完成了自我救赎，作为一个完整的人的自我救赎，在最后关头里昂看到了这个世界的光明，而实际上作为一个杀手，里昂一直生活在了黑暗之中，若非玛蒂尔，里昂对也不会有过多的对生命的向往，然而后来里昂还是死了。与我们喜欢的童话故事不同的是男女主角并没有幸福的生活在一起，然而，正是里昂的死亡才完成了他自我救赎的最后一步，作为一个杀手，他双手已经沾满了鲜血与仇恨，而作为一个正常人，他必须要用生命完成自我救赎，因此在充满希望中死去可以说是里昂最完美的归宿。而离开的玛蒂尔则重返学校开始学习，在这一段相处的过程中玛蒂尔感受到了爱，感受到了关怀，在与里昂的相处过程中她心中缺失的爱被填满，从而成长为了一个完整的人。<br>&nbsp;&nbsp;&nbsp;&nbsp;本来看电影就是图一个开心，所以我更喜欢那些搞笑的喜剧片，但是不得不说，这部电影不管是从拍摄手法，电影节奏以及整个场景来说都是极好的。就我个人来说我从里昂身上似乎看到了自己的影子，从家乡来到大城市打拼，一直努力的工作，似乎也没有什么兴趣爱好，所有精力都投入到了工作当中。总感觉我们的人生似乎缺了点什么，可能是爱，可能是认可，又可能是别的什么。不管怎么样，我们总是在完成自我的救赎，所以里昂他的痛苦，他的思考我甚至都感同身受，也许一千个读者有一千个哈姆雷特，不管怎么样，这部电影是让我感动的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;emm因为疫情的原因导致这个年一直都在家度过了，为了打发闲暇的时间所以宅在家的时候就一直在看电影，把以前看不下去的电影、以前没有看的电影、以前很喜欢的电影统统都准备翻出来看，最近好像是事情也比较多，所以看些电影也算放松一下吧，
      
    
    </summary>
    
      <category term="影评" scheme="http://www.wuweiblog.com/categories/%E5%BD%B1%E8%AF%84/"/>
    
    
      <category term="指环王，这个杀手不太冷" scheme="http://www.wuweiblog.com/tags/%E6%8C%87%E7%8E%AF%E7%8E%8B%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%9D%80%E6%89%8B%E4%B8%8D%E5%A4%AA%E5%86%B7/"/>
    
  </entry>
  
  <entry>
    <title>之子于归</title>
    <link href="http://www.wuweiblog.com/2020/02/03/%E4%B9%8B%E5%AD%90%E4%BA%8E%E5%BD%92/"/>
    <id>http://www.wuweiblog.com/2020/02/03/之子于归/</id>
    <published>2020-02-03T03:47:24.000Z</published>
    <updated>2020-02-03T03:52:04.785Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;前几天脑袋中一直有句话“之子于归，宜室宜家”，这句话来自诗经《桃夭》，可能最近谈婚论嫁的事情比较多，而自己读诗经比较少的原因吧！或者说这代表着我的愿望吧。一直觉得自己是一个很简单的人，一直记着硕士老板说的话，我们做人最终的原则应该是真诚，所以我一直对所有人都是十分真诚，我也觉得自己就是一个比较简单的人，我也只喜欢做一些简单的事情。也许是我做的不对，或者说是哪里有问题，我总是在反思，是不是哪里做的不够尽责，或者又是哪里疏忽了？<br>&nbsp;&nbsp;&nbsp;&nbsp;我今天把头像改了“之子于归”，我希望之子归能够接纳我的家人，也能够被我家人接纳，今天的沟通很不愉快，应该说这一段时间的沟通都很不愉快，我觉得有的话听起来确实是很尴尬，也很伤人。或者说极其伤人，我不知道应该有什么样的反应，我虽然心大但是不代表真的对一切的事情都觉得没有所谓，我感到很难受，感到说不出的难受，我没法把这个事情跟任何人说。不管是在自己家还是在梓萌那里，我似乎都做的不够好。一切都是我做的不够好，我不知道是不是自己缺乏处理这样问题的能力。以前的时候一直觉得婆媳矛盾我应该是能够处理的，至少也能够缓解吧，但是事实证明我的能力确实有限，似乎这一段时间以来我都做的不够好，大家都在指责我，我觉得最爱的人，最亲近的人，他们对我只有不理解和指责，一夜之间我好像变成了一个一无是处、什么都做不好的废物。我甚至都陷入了深深的自我怀疑，我不知道别人在结婚之前是不是也是有这样的情绪，我也想知道他们是如何处理这些问题的。从小到大我一直都是一个比较要强的人，我希望对每一件事都能够用尽全力，我希望能够努力处理好一切关系，我希望能够全心全意去爱一个人，我希望也有人能够全新全意的支持我、信任我、理解我。我不知道这个要求是不是太高，是不是太过分？<br>&nbsp;&nbsp;&nbsp;&nbsp;回来的时候看到亮仔跟他的女朋友一起换着开车回家，在后座上的我真的有些羡慕。前几天的时候亮仔还在跟我说买房的压力、结婚的压力，每个人好像都不抬容易，好像离婚率现在也是高的离谱，我不知道为什么大家觉得不幸福，我不知道为什么坐在后座的时候我感到他们真的很幸福，虽然睡着也只能在座位上躺一会，虽然一路都是吃的香肠泡面，虽然一路开了快二十个小时。我想想好像我很久都没有感受过这样简单的快乐了，一切的事情都压的我喘不过气来，好像一切都变得乏味，熟悉的人变得陌生，变得奇怪。这样的改变太突然了，这样的改变让我很难适应。不知道是不是所有人在婚前都会经历着么一遭，但是我好像有点累了，我有点累了，而且有点害怕，我一直跟自己说这些都能够解决，实际上可能没法解决，我都不知道要怎么面对以后的生活。<br>&nbsp;&nbsp;&nbsp;&nbsp;有些时候我在想，我是不是一个渣男，没有什么担当，也没有什么责任心，可是我不知道除了结婚我应该怎么表现出我的责任心，结婚对我来说是一件大事，但是我感觉似乎婚礼对我来说似乎也不是一件大事，我们需要仪式，但是不能依赖仪式，仪式是为了纪念而不是虚荣。今天有些话我是不喜欢的，让我感觉到似乎订的酒店，定的婚庆不够好会是一件多么丢人的事情，我甚至到现在都没有明白这个逻辑，好像是因为一个面子才需要举办婚礼，我一直觉得婚礼只是一个纪念，我甚至是觉得婚礼中最重要的事情就是那句“我愿意”而已，我不知道是不是我想的太简单，还是我活得太出世…之子于归，是一件多么美好的事情，我希望我也能更多的理解，能够更好的处理问题吧～“桃之夭夭，灼灼其华；之子于归，宜其室家！”婚礼</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前几天脑袋中一直有句话“之子于归，宜室宜家”，这句话来自诗经《桃夭》，可能最近谈婚论嫁的事情比较多，而自己读诗经比较少的原因吧！或者说这代表着我的愿望吧。一直觉得自己是一个很简单的人，一直记着硕士老板说的话，我们做人最终的原则
      
    
    </summary>
    
      <category term="随感" scheme="http://www.wuweiblog.com/categories/%E9%9A%8F%E6%84%9F/"/>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>大侠之死</title>
    <link href="http://www.wuweiblog.com/2020/01/04/%E5%A4%A7%E4%BE%A0%E4%B9%8B%E6%AD%BB/"/>
    <id>http://www.wuweiblog.com/2020/01/04/大侠之死/</id>
    <published>2020-01-04T03:45:30.000Z</published>
    <updated>2020-01-04T04:27:03.387Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;2019年已经过去了，实际上2019年已经过去有好几天了，本周周三就是元旦节，本来应该是在元旦那天写下这篇跨年的感受的，但是一直拖到了现在，想了一下，主要还是因为自己有拖延的毛病，其实这个毛病也不是一两天了，总是有这样的问题，总是觉得这些或者那些问题看似不重要所以就不太愿意花时间和精力去做，最后事到临头又来补救，不得不说这真是一个坏习惯，不过也就这样吧！有些毛病接受就好了，何必要强迫自己去改掉呢，本来也不过就是一个平凡的人而已，何必要为自己立下一个圣人的flag呢。<br>&nbsp;&nbsp;&nbsp;&nbsp;工作到现在已经有两年多了，实际上也才两年多，总是感觉已经工作得够久了一样，在工作之后总是感觉时间过的特别快，曾经看到过一个说法，大体的意思就是人在接触新东西的时候会觉得时间过得比较慢，当我们年龄既长，能够引起我们新鲜感的东西越来越少了，而日复一日的重复工作会让我们感觉时间流逝得特别快。我不知道这个说法是不是有道理，不过还是得承认，确实在工作之后时间过得特别得快。每次在工作中感觉自己像已经参加工作多年了一样，实际上也才不过短短两三年。今年经历的事情很多，谈婚论嫁、房子装修，每一件事情感觉都是大事，但是我都不太愿意去想，我不太喜欢流程性的东西，不过这些流程却也是不得不面对的。有时候一想到就要结婚了，我心里其实有些焦虑，感觉自己都没有把自己的生活过明白就要面临着结婚生子的问题了。其实我很想知道父母那辈是怎么想的，他们当初面临婚姻的时候是内心到底有什么样的考虑？或者那些结了婚的朋友们，他们到底是怎么想的？可能是我有点害怕吧！<br>&nbsp;&nbsp;&nbsp;&nbsp;以前的时候总是有着很牛逼的想法，总是想成为一个牛逼的人，后来年龄大了觉得自己似乎可以做一个技术大牛，能够有时间和精力去钻研一项技术，成为一个牛逼的人，到现在我发现实际上技术解决不了所有问题，或者说我的工作面临的问题并不是技术问题，或者说并不是靠着提升技术能够解决的。每一次的变化都对我的人生观造成了巨大的冲击，其实我很难适应这样的变化，不管与领导还是与同事交流，我都希望自己能够站在技术的前沿进行思考，但是慢慢我发现实际上自己做不到，在工作中似乎一直在吃老本，也许能够水几篇文章，能够做一些实验，但是已经失去了像读书时候那种精神了，太多的杂事让我心思变得很涣散，另外刷手机，以及上下班的公交也耗费了我大量的精力，在这样的情况下已经很难有精力去专注的做技术了。<br>&nbsp;&nbsp;&nbsp;&nbsp;今年的工作不如去年快乐，可能是因为面临着新的挑战，在这一年中有过很多次想要辞职，但是都忍住了冲动，可能恋爱和房贷是让我能够好好工作的两个重要的因素。学校是一个象牙塔，我们在其中其实都是不食人间烟火的大侠，后来落到了人间，大侠身上沾染了人间的烟火气，我们有了家庭，我们有了房贷，我们父母老了需要赡养父母，所以大侠被淹没在了这人间的烟火之中，慢慢死去，只剩下这一副填满的躯壳。<br>&nbsp;&nbsp;&nbsp;&nbsp;2019年妈妈过来住了一段时间，在这一段时间中我跟她好好讨论了一下关于年轻人压力以及生育情况的问题，我想她也许永远都不会明白我们这一代人所面临的压力，她只觉得我贪图享乐，不负责任。每一代人的悲喜确实都很不一样，可能她只是觉得我聒噪，而我永远觉得她沉闷。不管怎么样2019年已经成为了历史，2020年的画卷也展开了，虽然知道年只是我们人类用以记录的时间单位，但是总是需要有一个仪式与过去告别，我知道也许2020年，我的毛病依旧不会改，面临的挑战依旧不会少，但是我们并不能总生活在残酷的真相当中，我们还是需要一些仪式感来让我们对未来有所期待。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2019年已经过去了，实际上2019年已经过去有好几天了，本周周三就是元旦节，本来应该是在元旦那天写下这篇跨年的感受的，但是一直拖到了现在，想了一下，主要还是因为自己有拖延的毛病，其实这个毛病也不是一两天了，总是有这样的问题，
      
    
    </summary>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>ArcGIS绘图功能</title>
    <link href="http://www.wuweiblog.com/2019/12/03/ArcGIS%E7%BB%98%E5%9B%BE%E5%8A%9F%E8%83%BD/"/>
    <id>http://www.wuweiblog.com/2019/12/03/ArcGIS绘图功能/</id>
    <published>2019-12-03T11:32:00.000Z</published>
    <updated>2019-12-10T02:30:50.087Z</updated>
    
    <content type="html"><![CDATA[<h3 id="概述："><a href="#概述：" class="headerlink" title="概述："></a>概述：</h3><p>&nbsp; &nbsp; &nbsp; &nbsp;在GIS应用中有一个十分重要的应用为绘图应用，一直以来基于Web的GIS在绘图方面的应用都是弱项，这其中主要问题在于Web GIS在应用过程中，所有数据都是通过浏览器进行存储和渲染，而浏览器所能够使用到的计算机资源是有限的，因此相比于给予客户端的GIS软件，基于Web GIS的应用中绘制的功能较弱，因此Web GIS更偏向于数据展示，然而随着计算机性能的发展与WebGL技术的发展，Web GIS的应用领域得到了极大的扩展，以前看起来较为复杂的绘制功能实际上也能够在浏览器端得到比较好的实现，下面我将仔细描述一下通过ArcGIS进行WebGIS应用的绘图功能。</p><h3 id="ArcGIS绘图功能说明："><a href="#ArcGIS绘图功能说明：" class="headerlink" title="ArcGIS绘图功能说明："></a>ArcGIS绘图功能说明：</h3><p>&nbsp; &nbsp; &nbsp; &nbsp;基于ArcGIS的绘图功能的实现实际上主要是通过Draw这个对象来实现的，在 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-draw-Draw.html" target="_blank" rel="noopener">官网</a>上会有比较详细的Demo和说明，但是为了方便理解以及应用，我这里还是进行一些简单的总结：</p><ul><li>1 通过Sketch来实现绘图功能，实际上简单的来说就是指直接通过Sketch Widget这个控件来实现绘图功能；</li><li>2 通过Draw函数实现绘图功能；</li></ul><p>&nbsp; &nbsp; &nbsp; &nbsp;如果想要采用第一种方法进行绘制，则方法很简单，引入对应的控件，然后就能够实现画图功能，包括绘制点，线，面以及一些包括正方形，圆形在内的规则形状，同时还提供了选择、编辑以及删除绘制的图形等功能，通过此控件进行绘制主要优点在于使用简单，能够快速的搭建起一个绘制的功能，但是通过此控件进行绘图也存在着一些问题，主要问题在于无法进行定制化的应用，如果只是需要一个简单而且功能全面的绘图控件，则此控件完全符合要求，如果功能要求有较强的定制化，则此控件可能难以满足要求，另外对于完成的控件的定制化开发可能需要花费更多的时间，如果大家想要了解Sketch控件的使用，直接关注<a href="https://developers.arcgis.com/javascript/latest/sample-code/sketch-geometries/index.html" target="_blank" rel="noopener">ArcGIS的Demo网站</a>查看示例代码就可以了。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;对于大部分应用来说，直接使用空间远远满足不了应用要求，需要提供更加底层的API进行定制化的开发，这样我们就需要使用到Draw模块了。实际上这个模块的使用过程也比较简单，主要包括以下几个步骤：1.引入Draw模块；2.Draw模块与view视图进行绑定；3.定义绘制的方法；4.绘制方法d的响应；下面我们针对以上几个步骤进行分别的说明：</p><p>&nbsp; &nbsp; &nbsp; &nbsp;1.引入绘制函数：“esri/views/draw/Draw”，直接通过require模块引入绘制函数模块，然后直接定义全局绘制函数绑定view以便于进行绘制；2.Draw模块与View进行绑定，定义绘制方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> // create a new instance of draw</span><br><span class="line">var draw = new Draw(&#123;</span><br><span class="line">  view: view</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// create an instance of draw polyline action</span><br><span class="line">// the polyline vertices will be only added when</span><br><span class="line">// the pointer is clicked on the view</span><br><span class="line">var action = draw.create(&quot;polyline&quot;, &#123;mode: &quot;click&quot;&#125;);</span><br><span class="line"></span><br><span class="line">// fires when a vertex is added</span><br><span class="line">action.on(&quot;vertex-add&quot;, function (evt) &#123;</span><br><span class="line">  measureLine(evt.vertices);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// fires when the pointer moves</span><br><span class="line">action.on(&quot;cursor-update&quot;, function (evt) &#123;</span><br><span class="line">  measureLine(evt.vertices);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// fires when the drawing is completed</span><br><span class="line">action.on(&quot;draw-complete&quot;, function (evt) &#123;</span><br><span class="line">  measureLine(evt.vertices);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// fires when a vertex is removed</span><br><span class="line">action.on(&quot;vertex-remove&quot;, function (evt) &#123;</span><br><span class="line">  measureLine(evt.vertices);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function measureLine(vertices) &#123;</span><br><span class="line">  view.graphics.removeAll();</span><br><span class="line"></span><br><span class="line">  var line = createLine(vertices);</span><br><span class="line">  var lineLength = geometryEngine.geodesicLength(line, &quot;miles&quot;);</span><br><span class="line">  var graphic = createGraphic(line);</span><br><span class="line">  view.graphics.add(graphic);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>通过action定义绘制方法，在ArcGIS中的绘制方法包括：Point，MutiPoint，Polyline，Polygon，定义绘制方法之后就需要响应绘制函数，实际上对于绘制不同的地物，对应需要响应的方法也存在差异，如果需要将绘制的结果进行保存，一般l来说我们再新建一个GraphicsLayer图层，通过此图层进行保存，将数据保存到图层中。<br>整体代码为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"utf-8"</span> /&gt;</span><br><span class="line">    &lt;meta</span><br><span class="line">      name=<span class="string">"viewport"</span></span><br><span class="line">      content=<span class="string">"initial-scale=1,maximum-scale=1,user-scalable=no"</span></span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;title&gt;Draw polyline - <span class="number">4.13</span>&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;link</span></span><br><span class="line"><span class="regexp">      rel="stylesheet"</span></span><br><span class="line"><span class="regexp">      href="https:/</span><span class="regexp">/js.arcgis.com/</span><span class="number">4.13</span>/esri/themes/light/main.css<span class="string">"</span></span><br><span class="line"><span class="string">    /&gt;</span></span><br><span class="line"><span class="string">    &lt;script src="</span>https:<span class="comment">//js.arcgis.com/4.13/"&gt;&lt;/script&gt;</span></span><br><span class="line">    &lt;script src=<span class="string">"http://libs.baidu.com/jquery/2.1.4/jquery.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      html,</span><br><span class="line">      body,</span><br><span class="line">      #viewDiv &#123;</span><br><span class="line">        height: <span class="number">100</span>%;</span><br><span class="line">        width: <span class="number">100</span>%;</span><br><span class="line">        margin: <span class="number">0</span>;</span><br><span class="line">        padding: <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;script&gt;</span></span><br><span class="line"><span class="regexp">      require([</span></span><br><span class="line"><span class="regexp">        "esri/Map",</span></span><br><span class="line"><span class="regexp">        "esri/views/MapView",</span></span><br><span class="line"><span class="regexp">        "esri/views/draw/Draw",</span></span><br><span class="line"><span class="regexp">        "esri/Graphic",</span></span><br><span class="line"><span class="regexp">        "esri/layers/GraphicsLayer",</span></span><br><span class="line"><span class="regexp">        "esri/geometry/geometryEngine"</span></span><br><span class="line"><span class="regexp">      ], function(Map, MapView, Draw, Graphic, GraphicsLayer,geometryEngine) &#123;</span></span><br><span class="line"><span class="regexp">        const map = new Map(&#123;</span></span><br><span class="line"><span class="regexp">          basemap: "gray"</span></span><br><span class="line"><span class="regexp">        &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        const view = new MapView(&#123;</span></span><br><span class="line"><span class="regexp">          container: "viewDiv",</span></span><br><span class="line"><span class="regexp">          map: map,</span></span><br><span class="line"><span class="regexp">          zoom: 16,</span></span><br><span class="line"><span class="regexp">          center: [18.06, 59.34]</span></span><br><span class="line"><span class="regexp">        &#125;);</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/var layerSave = new GraphicsLayer();</span></span><br><span class="line"><span class="regexp">        var layerSavePoint = new GraphicsLayer();</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/map.add(layerSave);</span></span><br><span class="line"><span class="regexp">        map.add(layerSavePoint);</span></span><br><span class="line"><span class="regexp">        var param=&#123;</span></span><br><span class="line"><span class="regexp">              "devType":0,</span></span><br><span class="line"><span class="regexp">              "schemeId":"07b0486b0e014b5ba80685d72dc38351"</span></span><br><span class="line"><span class="regexp">            &#125;;</span></span><br><span class="line"><span class="regexp">        $.ajax(&#123;</span></span><br><span class="line"><span class="regexp">              url: "http:/</span><span class="regexp">/192.168.43.214:8087/</span>visual/query-project-scheme-dev<span class="string">",</span></span><br><span class="line"><span class="string">              type: "</span>post<span class="string">",</span></span><br><span class="line"><span class="string">              data: JSON.stringify(param),</span></span><br><span class="line"><span class="string">              headers: &#123;</span></span><br><span class="line"><span class="string">                  'Origin':"</span>*<span class="string">",</span></span><br><span class="line"><span class="string">                  'content-type': "</span>application/json<span class="string">",</span></span><br><span class="line"><span class="string">                  // 'token': "</span>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NzQ5MjUzNzAsInVzZXJuYW1lIjoiaHowMDEifQ.P1Rzs0A6klHU6CZqBuItibpya-kfsT5kJ1w7EboJtAo<span class="string">"</span></span><br><span class="line"><span class="string">              &#125;,</span></span><br><span class="line"><span class="string">              success: function(result) &#123;  //这里就是我出错的地方</span></span><br><span class="line"><span class="string">                console.log(result.data.list[0]);</span></span><br><span class="line"><span class="string">                for(var i=0;i&lt;result.data.list.length;++i)&#123;</span></span><br><span class="line"><span class="string">                  var graphic=Graphic.fromJSON(JSON.parse(result.data.list[i]["</span>geometryInfo<span class="string">"]));</span></span><br><span class="line"><span class="string">                  layerSavePoint.graphics.add(graphic);</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">              &#125;,</span></span><br><span class="line"><span class="string">              error: function(data) &#123;</span></span><br><span class="line"><span class="string">                console.log("</span>请求出错<span class="string">");</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">        &#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        // add the button for the draw tool</span></span><br><span class="line"><span class="string">        view.ui.add("</span>line-button<span class="string">", "</span>top-left<span class="string">");</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        const draw = new Draw(&#123;</span></span><br><span class="line"><span class="string">          view: view</span></span><br><span class="line"><span class="string">        &#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        var drawType=0;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        // draw polyline button</span></span><br><span class="line"><span class="string">        document.getElementById("</span>line-button<span class="string">").onclick = function() &#123;</span></span><br><span class="line"><span class="string">            const action = draw.create("</span>polyline<span class="string">");</span></span><br><span class="line"><span class="string">            action.on(</span></span><br><span class="line"><span class="string">              [</span></span><br><span class="line"><span class="string">                "</span>vertex-add<span class="string">",</span></span><br><span class="line"><span class="string">                "</span>vertex-remove<span class="string">",</span></span><br><span class="line"><span class="string">                "</span>cursor-update<span class="string">",</span></span><br><span class="line"><span class="string">                "</span>redo<span class="string">",</span></span><br><span class="line"><span class="string">                "</span>undo<span class="string">"</span></span><br><span class="line"><span class="string">              ],</span></span><br><span class="line"><span class="string">              updateVertices</span></span><br><span class="line"><span class="string">            );  </span></span><br><span class="line"><span class="string">            action.on("</span>draw-complete<span class="string">", function (evt) &#123;</span></span><br><span class="line"><span class="string">              saveLineGraphic(evt);</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">        &#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        // Checks if the last vertex is making the line intersect itself.</span></span><br><span class="line"><span class="string">        function updateVertices(event) &#123;</span></span><br><span class="line"><span class="string">          // create a polyline from returned vertices</span></span><br><span class="line"><span class="string">          if (event.vertices.length &gt; 1) &#123;</span></span><br><span class="line"><span class="string">            const result = createLineGraphic(event);</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        // create a new graphic presenting the polyline that is being drawn on the view</span></span><br><span class="line"><span class="string">        function createLineGraphic(event) &#123;</span></span><br><span class="line"><span class="string">            const vertices = event.vertices;</span></span><br><span class="line"><span class="string">            view.graphics.removeAll();</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            // a graphic representing the polyline that is being drawn</span></span><br><span class="line"><span class="string">            const graphic = new Graphic(&#123;</span></span><br><span class="line"><span class="string">                geometry: &#123;</span></span><br><span class="line"><span class="string">                type: "</span>polyline<span class="string">",</span></span><br><span class="line"><span class="string">                paths: vertices,</span></span><br><span class="line"><span class="string">                spatialReference: view.spatialReference</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                symbol: &#123;</span></span><br><span class="line"><span class="string">                type: "</span>simple-line<span class="string">", // autocasts as new SimpleFillSymbol</span></span><br><span class="line"><span class="string">                color: [4, 90, 141],</span></span><br><span class="line"><span class="string">                width: 4,</span></span><br><span class="line"><span class="string">                cap: "</span>round<span class="string">",</span></span><br><span class="line"><span class="string">                join: "</span>round<span class="string">",</span></span><br><span class="line"><span class="string">                style: "</span>dash<span class="string">"</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            view.graphics.add(graphic);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        function saveLineGraphic(event)&#123;</span></span><br><span class="line"><span class="string">            const vertices = event.vertices;</span></span><br><span class="line"><span class="string">            view.graphics.removeAll();</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            // a graphic representing the polyline that is being drawn</span></span><br><span class="line"><span class="string">            const graphic = new Graphic(&#123;</span></span><br><span class="line"><span class="string">                geometry: &#123;</span></span><br><span class="line"><span class="string">                type: "</span>polyline<span class="string">",</span></span><br><span class="line"><span class="string">                paths: vertices,</span></span><br><span class="line"><span class="string">                spatialReference: view.spatialReference</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                symbol: &#123;</span></span><br><span class="line"><span class="string">                type: "</span>simple-line<span class="string">", // autocasts as new SimpleFillSymbol</span></span><br><span class="line"><span class="string">                color: [4, 90, 141],</span></span><br><span class="line"><span class="string">                width: 4,</span></span><br><span class="line"><span class="string">                cap: "</span>round<span class="string">",</span></span><br><span class="line"><span class="string">                join: "</span>round<span class="string">",</span></span><br><span class="line"><span class="string">                style: "</span>dash<span class="string">"</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            layerSavePoint.graphics.add(graphic);</span></span><br><span class="line"><span class="string">            var param=&#123;</span></span><br><span class="line"><span class="string">              "</span>devType<span class="string">":0,</span></span><br><span class="line"><span class="string">              "</span>geometryInfo<span class="string">":JSON.stringify(graphic.toJSON()),</span></span><br><span class="line"><span class="string">              "</span>schemeId<span class="string">":"</span><span class="number">07</span>b0486b0e014b5ba80685d72dc38351<span class="string">"</span></span><br><span class="line"><span class="string">            &#125;;</span></span><br><span class="line"><span class="string">            $.ajax(&#123;</span></span><br><span class="line"><span class="string">              url: "</span>http:<span class="comment">//192.168.43.214:8087/visual/add-project-scheme-dev",</span></span><br><span class="line">              type: <span class="string">"post"</span>,</span><br><span class="line">              data: <span class="built_in">JSON</span>.stringify(param),</span><br><span class="line">              headers: &#123;</span><br><span class="line">                  <span class="string">'Origin'</span>:<span class="string">"*"</span>,</span><br><span class="line">                  <span class="string">'content-type'</span>: <span class="string">"application/json"</span>,</span><br><span class="line">                  <span class="comment">// 'token': "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NzQ5MjUzNzAsInVzZXJuYW1lIjoiaHowMDEifQ.P1Rzs0A6klHU6CZqBuItibpya-kfsT5kJ1w7EboJtAo"</span></span><br><span class="line">              &#125;,</span><br><span class="line">              success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;  <span class="comment">//这里就是我出错的地方</span></span><br><span class="line">                <span class="built_in">console</span>.log(result.msg);</span><br><span class="line">              &#125;,</span><br><span class="line">              error: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"请求出错"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">previewPointGraphic</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> coordinates=event.coordinates;</span><br><span class="line">            view.graphics.removeAll();</span><br><span class="line">            <span class="keyword">var</span> point = &#123;</span><br><span class="line">                type: <span class="string">"point"</span>, <span class="comment">// autocasts as /Point</span></span><br><span class="line">                x: coordinates[<span class="number">0</span>],</span><br><span class="line">                y: coordinates[<span class="number">1</span>],</span><br><span class="line">                spatialReference: view.spatialReference</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> graphic = <span class="keyword">new</span> Graphic(&#123;</span><br><span class="line">                geometry: point,</span><br><span class="line">                symbol: &#123;</span><br><span class="line">                type: <span class="string">"picture-marker"</span>, <span class="comment">// autocasts as SimpleMarkerSymbol</span></span><br><span class="line">                url: <span class="string">"https://static.arcgis.com/images/Symbols/Shapes/BlackStarLargeB.png"</span>,</span><br><span class="line">                size: <span class="string">"16px"</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            view.graphics.add(graphic);            </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">savePointGraphic</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> coordinates=event.coordinates;</span><br><span class="line">            view.graphics.removeAll();</span><br><span class="line">            <span class="keyword">var</span> point = &#123;</span><br><span class="line">                type: <span class="string">"point"</span>, <span class="comment">// autocasts as /Point</span></span><br><span class="line">                x: coordinates[<span class="number">0</span>],</span><br><span class="line">                y: coordinates[<span class="number">1</span>],</span><br><span class="line">                spatialReference: view.spatialReference</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> graphic = <span class="keyword">new</span> Graphic(&#123;</span><br><span class="line">                geometry: point,</span><br><span class="line">                symbol: &#123;</span><br><span class="line">                type: <span class="string">"picture-marker"</span>, <span class="comment">// autocasts as SimpleMarkerSymbol</span></span><br><span class="line">                url: <span class="string">"https://static.arcgis.com/images/Symbols/Shapes/BlackStarLargeB.png"</span>,</span><br><span class="line">                size: <span class="string">"16px"</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            layerSavePoint.graphics.add(graphic);</span><br><span class="line">            <span class="keyword">var</span> param=&#123;</span><br><span class="line">              <span class="string">"devType"</span>:<span class="number">0</span>,</span><br><span class="line">              <span class="string">"geometryInfo"</span>:<span class="built_in">JSON</span>.stringify(graphic.toJSON()),</span><br><span class="line">              <span class="string">"schemeId"</span>:<span class="string">"07b0486b0e014b5ba80685d72dc38351"</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">//console.log(JSON.stringify(graphic.toJSON()));</span></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">              url: <span class="string">"http://192.168.43.214:8087/visual/add-project-scheme-dev"</span>,</span><br><span class="line">              type: <span class="string">"post"</span>,</span><br><span class="line">              data: <span class="built_in">JSON</span>.stringify(param),</span><br><span class="line">              headers: &#123;</span><br><span class="line">                  <span class="string">'Origin'</span>:<span class="string">"*"</span>,</span><br><span class="line">                  <span class="string">'content-type'</span>: <span class="string">"application/json"</span>,</span><br><span class="line">                  <span class="comment">// 'token': "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NzQ5MjUzNzAsInVzZXJuYW1lIjoiaHowMDEifQ.P1Rzs0A6klHU6CZqBuItibpya-kfsT5kJ1w7EboJtAo"</span></span><br><span class="line">              &#125;,</span><br><span class="line">              success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;  <span class="comment">//这里就是我出错的地方</span></span><br><span class="line">                <span class="built_in">console</span>.log(result.msg);</span><br><span class="line">              &#125;,</span><br><span class="line">              error: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"请求出错"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">//console.log(JSON.stringify(graphic.toJSON()));</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=<span class="string">"viewDiv"</span>&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        id=<span class="string">"line-button"</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span></span>=<span class="string">"esri-widget esri-widget--button esri-interactive"</span></span><br><span class="line">        title=<span class="string">"Draw polyline"</span></span><br><span class="line">      &gt;</span><br><span class="line">        &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"esri-icon-polyline"</span>&gt;&lt;/span&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;概述：&quot;&gt;&lt;a href=&quot;#概述：&quot; class=&quot;headerlink&quot; title=&quot;概述：&quot;&gt;&lt;/a&gt;概述：&lt;/h3&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;在GIS应用中有一个十分重要的应用为绘图应用，一直以来基于Web的GIS在绘图
      
    
    </summary>
    
      <category term="学习" scheme="http://www.wuweiblog.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ArcGIS开发" scheme="http://www.wuweiblog.com/tags/ArcGIS%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>无所谓与焦虑</title>
    <link href="http://www.wuweiblog.com/2019/11/17/%E6%97%A0%E6%89%80%E8%B0%93%E4%B8%8E%E7%84%A6%E8%99%91/"/>
    <id>http://www.wuweiblog.com/2019/11/17/无所谓与焦虑/</id>
    <published>2019-11-17T06:07:00.000Z</published>
    <updated>2019-11-17T10:38:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp; &nbsp; &nbsp; &nbsp;最近总是觉得自己很容易就变得焦虑，对此有很多的思考，其实有很多时候，很多焦虑其实不是别人给的，而是自己给自己的，很多时候我都在想，为什么我会要觉得焦虑呢？我们生活的底线是什么，如果只是为了能够生活下去，其实我们完全可以没有太大的必要感到焦虑。但是另一个方面，其实这个社会在贩卖焦虑，在鼓励焦虑，在告诉年轻人你们需要焦虑，你们需要像工蚁一样干活。不管是“中国梦”也好，还是“社会主义伟大复兴”也罢，对于年轻人来说其实都很虚无缥缈，我们只想看见我们眼前的，我们只相信我们手中的，至于为什么这样，我想即使不说大家也明白。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;好像社会中对年轻人（也许九零后不应该算是年轻人了）充斥着两种截然不同的态度，一种是是迎合，另一种是批判。其实我觉得问题并不在于九零后，而是社会与经济的发展，实际上社会发展的常态化在于阶级之间流动性减弱，资本在人生中占据了主要作用，个人的努力在生产资料面前显得不那么重要。当社会面临这几点之后必然会出现我们所面临的困境。社会重要资源集中在上层和下层，因为上层是统治阶级，是决策者，是社会总生产资料的拥有者，所以社会资源像他们集中，而下层人民，他们是国家的主人，他们是被解放的人，他们从一无所有到一无所有，社会资源保障他们的基本诉求是为了让社会不致陷于动荡。然而所谓的中产阶层，实际上是最无力的阶层，他们没有上层人士的资源，有缺乏下层人士失去一切的勇气，由此注定了他们的软弱。所以提中产阶层这个概念我觉得在我国的大环境下最容易困扰与压榨的对象。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;而年轻人，和中产阶级就比较像，一方面望着高昂的房价，年轻人看到了资本的力量，也许一套房就是自己一生无法企及的资本，而这一切可能生来就注定了。所以很多人选择了颓废，选择去他妈的吧，既然资本让年轻人没有未来，那年轻人就干脆选择放弃未来了，我觉得这样也挺好。就让资本收割止于我们这一代就好了吧，所以年轻人就开始丧了，开始彻底的无所谓起来。但是我们的无所谓并不是真的无所谓，当机会在面前的时候还是会感到焦虑，所以处于一种二元对立的分裂当中，所以我们一边无所谓一边焦虑。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;时代的特点注定没有其他人能够体会，所以我们只能默默承受，然后面对着这个时代拔刀吧！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;最近总是觉得自己很容易就变得焦虑，对此有很多的思考，其实有很多时候，很多焦虑其实不是别人给的，而是自己给自己的，很多时候我都在想，为什么我会要觉得焦虑呢？我们生活的底线是什么，如果只是为了能够生活下去，其实我们完全可以没
      
    
    </summary>
    
      <category term="随感" scheme="http://www.wuweiblog.com/categories/%E9%9A%8F%E6%84%9F/"/>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>忙碌边缘</title>
    <link href="http://www.wuweiblog.com/2019/11/10/%E5%BF%99%E7%A2%8C%E8%BE%B9%E7%BC%98/"/>
    <id>http://www.wuweiblog.com/2019/11/10/忙碌边缘/</id>
    <published>2019-11-10T11:32:00.000Z</published>
    <updated>2019-11-10T12:54:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp; &nbsp; &nbsp; &nbsp;上个周末就在宿舍睡觉，这个周末也在家里平躺着休息。本来想着能够看一下书顺便整理一下自己的知识体系架构，但是好像计划的事情全部都没有做，有一点点感觉到恐慌。但是我又在想，其实我不应该恐慌才是，工作和学习（实际上我认为学习也是工作的一部分）虽然是我们生命中很重要的一部分，但是我们也没有必要因为自己有时候的休息而感到自责和惭愧，可是到底是什么原因让我感觉到因为每周这两天的休息而感到恐慌和惭愧呢？<br>&nbsp; &nbsp; &nbsp; &nbsp;虽然说我支持高考，支持目前的教育模式，但是不得不说，一直处在竞争教育模式下的我们都面临着囚徒困境，为了稀缺的资源不得不与其他人竞争，而这样的竞争导致的最大的后果是资源变得更加稀缺，我们永远不会满足。经常跟梓萌聊起她在国外生活的日子，也许是资本主义国家社会财富确实比较丰富吧，她跟我说国外的人看起来会要安逸很多，每当这个时候我就会跟她说，其实这个是社会发展的结果，等我们社会财富积累与发展之后我们也能够向他们一样安逸。这个说法听起来很有道理也很励志，但是实际上却是有着极大的问题，只要有人的地方就会有着不平等，老板就是能够比员工有着更大的话语权，也许话不是这么好听，但是道理却是很浅显的。很早之前就了解到，虽然我们社会科技与经济的发展在这一两百年内超过了过去甚至几千年发展的总和，但是人性的发展却是极其缓慢的，我们面临着的问题实际上也差不多，或许我们通过互联网能够有更大的视野，更广泛的信息来源途径，但是实际上这个社会的结构本身没有太多的改变。  </p><p>&nbsp; &nbsp; &nbsp; &nbsp;我本身是一个不太喜欢冒险的人，我总是喜欢一切尽在掌握中的感觉，但是实际上我们身处这个社会中就如同大海中的小木筏，任何一个风浪就会让我们掉入深渊，所以我感到害怕。但是换个角度想想，好像我身边就没有发现能够掌握自己命运的人，大家都是这个样子，往前是未知，往后是深渊，所以我害怕，我需要更大的船，更多的救生装备。所以我对时间的流逝感到紧张，感到害怕。但是其实生活并不应该是这个样子，前两天的时候梓萌说她回家八点能够吃到晚饭就感觉是早的了，她说她不想过这样的生活，实话说其实我也不想过这样的生活，但是我们能够过什么样的生活？回老家去拼爹好像也拼不过人家，在这里好歹还能苟活，回去就真的不知道应该怎么生活了。  </p><p>&nbsp; &nbsp; &nbsp; &nbsp;乱七八糟的想法写了很多，也没有什么太有价值的东西，</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;上个周末就在宿舍睡觉，这个周末也在家里平躺着休息。本来想着能够看一下书顺便整理一下自己的知识体系架构，但是好像计划的事情全部都没有做，有一点点感觉到恐慌。但是我又在想，其实我不应该恐慌才是，工作和学习（实际上我认为学习也
      
    
    </summary>
    
      <category term="随感" scheme="http://www.wuweiblog.com/categories/%E9%9A%8F%E6%84%9F/"/>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>Kafka原理与应用</title>
    <link href="http://www.wuweiblog.com/2019/10/29/kafka%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/"/>
    <id>http://www.wuweiblog.com/2019/10/29/kafka原理与应用/</id>
    <published>2019-10-29T08:34:08.000Z</published>
    <updated>2019-08-22T10:32:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;Kafka是最初由Linkedin公司开发，是一个分布式、支持分区的（partition）、多副本的（replica），基于zookeeper协调的分布式消息系统，它的最大的特性就是可以实时的处理大量数据以满足各种需求场景：比如基于hadoop的批处理系统、低延迟的实时系统、storm/Spark流式处理引擎，web/nginx日志、访问日志，消息服务等等，用scala语言编写，Linkedin于2010年贡献给了Apache基金会并成为顶级开源项目。提高Kafka我们首先从消息队列入手，然后再看看Kafka的架构设计存在的特点以及其应用。</p><h2 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;什么是消息队列，简单的来说消息队列（Message Queue）是一种进程间通信或同一进程的不同线程间的通信方式。消息队列可以理解为前后端的一个中间件，对于一般应用来说，由前端直接访问后端或者后端向前端推送消息，这样的模式存在着几个问题：1.前后端应用耦合性的问题；2.程序异步执行问题；3.流量控制问题；而消息队列的出现就是针对以上几个问题的一个解决方案。<br>&nbsp;&nbsp;&nbsp;&nbsp;以一个简单的例子来说明消息队列的应用场景，比如秒杀系统，在短时间内会存在大量的用户请求，这些请求如果全部都由后台来进行处理，则会导致后台压力大大提高，甚至会出现无法响应的问题，而前端用户需要等待的时间也大大延长，为了能够处理以上问题，我们通过一个消息队列快速存储所有用户消息，由于队列是一个先进先出的存储模式，因此通过消息队列的形式保证用户请求都能够请求到，然后后台逐步进行响应，从前端用户来说降低了请求无法响应的概率，同时后台也能够大大减轻服务压力。但是这样做也会出现一个问题，就是我们将用户请求发给消息队列后，用户接收到处理完成信息，但是这并不代表消息已经被处理了，因此需要重新在后台处理完消息队列后的消息后再提供反馈确认消息处理完成，当然采用消息队列虽然能够解决一些问题，但是滥用消息队列也会造成一些问题，主要包括：</p><ul><li><strong><em>系统可用性降低：</em></strong> 系统可用性在某种程度上降低，为什么这样说呢？在加入MQ之前，你不用考虑消息丢失或者说MQ挂掉等等的情况，但是，引入MQ之后你就需要去考虑了！</li><li><strong><em>系统复杂性提高：</em></strong> 加入MQ之后，你需要保证消息没有被重复消费、处理消息丢失的情况、保证消息传递的顺序性等等问题！</li><li><strong><em>一致性问题：</em></strong> 我上面讲了消息队列可以实现异步，消息队列带来的异步确实可以提高系统响应速度。但是，万一消息的真正消费者并没有正确消费消息怎么办？这样就会导致数据不一致的情况了!</li></ul><p>提出以上问题只是为了说明消息队列能够对系统负载有极大的提高，但是我们也不能忽略其带来的副作用，什么时候使用消息队列，以及如何使用需要我们仔细思考。</p><h2 id="Kafka原理说明"><a href="#Kafka原理说明" class="headerlink" title="Kafka原理说明"></a>Kafka原理说明</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;其实kafka也就是是一种消息队列，只是其在简单的消息队列的基础上进行了更加完整的架构，我们下面仔细说明一下kafka的架构信息。<br><img src="https://blogimage-1251632003.cos.ap-guangzhou.myqcloud.com/kafka%E6%9E%B6%E6%9E%84%E5%9B%BE.png" alt="kafka架构"><br>&nbsp;&nbsp;&nbsp;&nbsp;从上面的架构图中可以看到，kafka的几个特点以及几个名词，主要包括：</p><ul><li>生产者（Producer）:消息和数据生产者</li><li>代理（Broker）:缓存代理，Kafka的核心功能</li><li>消费者（Consumer）:消息和数据消费者</li></ul><p>实际上kafka的过程就是从生产者生产了数据放在Broker中，Broker承担一个中间缓存和分发的作用，负责分发注册到系统中的Consumer，实际上Consumer通过主动取数据的方式能够取到kafka中的消息，这一个整体的流程就是kafka作为一个消息队列的整个过程。在这里Broker可以看做一个服务器集群，他们通过zookeeper进行负载均衡。此外还有一些术语，包括topic，partition，以及message，kafka将消息组合为一个或多个topic进行存储，实际上topic就是某一类消息的汇总，我们可以将其理解为一个文件名，或者是一个文件描述，在topic之下有partition，partition为消息存储的实际结构，一个topic的消息可以保存到多个partition中供消费者读取，每个消息都被标识了一个递增序列号代表其进来的先后顺序，并按顺序存储在partition中。这个标识在kafka中称为id，实际上消费者能够通过id以及其偏移量进行随机的读取消息，实现了消息的灵活读取。<br>&nbsp;&nbsp;&nbsp;&nbsp;作为一个消息队列，kafka提供了消息持久化的功能，即消息能够保存到文件中进行持久化，同时kafka也支持备份机制，对于kafka来说，所有Node都提供一份完整备份，也就是说当有N个副本时，N个副本都在ISR中，N-1个副本都出现异常时，系统依然能提供服务。具体的kafka的消息持久化和备份机制可以参看<a href="https://kafka.apache.org/" target="_blank" rel="noopener">kafka官网介绍</a>。  </p><h2 id="Kafka应用实践"><a href="#Kafka应用实践" class="headerlink" title="Kafka应用实践"></a>Kafka应用实践</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;kafka做为一个消息队列，其设计是十分精巧的，但是他的使用和部署方法却是十分方便，在windows下也能够方便的进行部署和使用，正常情况下按照<a href="https://blog.csdn.net/woshixiazaizhe/article/details/80610432" target="_blank" rel="noopener">参考资料</a>都能够部署成功，但是有几个问题是需要确认的，第一个问题在于kafka的版本，在我尝试过程中3.5以上的版本在部署的过程中可能出现问题，因此建议采用3.4.X的版本部署。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Kafka是最初由Linkedin公司开发，是一个分布式、支持分区的（partition）、多副本的（replica），基于zookeeper协调的分布式消息系统，它的最大的特性就是可以实时的处理大量数据以满足各种需求场景：比
      
    
    </summary>
    
      <category term="学习" scheme="http://www.wuweiblog.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="系统架构 学习" scheme="http://www.wuweiblog.com/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84-%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>矢量切片理论与实践</title>
    <link href="http://www.wuweiblog.com/2019/10/28/%E7%9F%A2%E9%87%8F%E5%88%87%E7%89%87%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/"/>
    <id>http://www.wuweiblog.com/2019/10/28/矢量切片理论与实践/</id>
    <published>2019-10-28T02:39:09.000Z</published>
    <updated>2019-08-20T06:40:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;矢量数据则是试图利用点、线、面等几何要素来表现这个世界，其数据结构紧凑精准，数据图形质量好，有利于地理信息检索与网络传输等。其中矢量数据的最小单元是以点的形式存在，点构成线，线组成面，面构造出体。随着WebGIS的发展，对于数据展示与数据传输的要求也在不断提高，对于栅格数据来说，通过切片的方式进行动态渲染能够实现根据数据展示范围与层级的实时渲染，大大提高了数据加载效率，而对于矢量数据来说，如果矢量数据量比较大，则前端渲染则效率会出现明显下降，因此为了提高矢量数据渲染和展示能力，同时充分利用矢量数据无极缩放的能力，矢量切片的技术应运而生。</p><h2 id="矢量切片的理论基础"><a href="#矢量切片的理论基础" class="headerlink" title="矢量切片的理论基础"></a>矢量切片的理论基础</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;对于栅格数据的切片我们很好理解，通过影像采样的方式得到不同层级的影像，通过地理坐标到像素行列号的方法映射出地理坐标，相比于栅格数据切片方法，矢量数据虽然在原理上存在一定的相似性，但是由于矢量数据的特殊性，矢量切片与栅格数据切片还是存在一定的差异。<br>&nbsp;&nbsp;&nbsp;&nbsp;目前矢量切片主要有以下三种格式：GeoJSON，TopoJSON和MapbBox Vector Tile(MVT)，其中使用的比较广泛的为MVT格式，在栅格切片中每一个栅格为一张影像，影像样式无法进行修改与处理，而矢量切片，实际上是根据切片范围对矢量数据的描述进行切片，针对不同的范围加载不同的切片描述，而前端根据切片描述绘制出对应的矢量数据。实际上我个人理解为：类似影像数据，我们将矢量数据按照一定的切片规则分为不同的块，每个块能够对应一个地理范围，我们将这个地理范围内的数据以某一种绘制方式进行编码得到一个类似于影像的编码文件，前端根据展示的范围显示对应的编码块，并根据编码块进行渲染展示。</p><h2 id="矢量瓦片数据格式标准"><a href="#矢量瓦片数据格式标准" class="headerlink" title="矢量瓦片数据格式标准"></a>矢量瓦片数据格式标准</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/jingsam/vector-tile-spec/blob/master/2.1/README_zh.md" target="_blank" rel="noopener">MapbBox Vector Tile(MVT)格式标准参考</a>，实际上不同格式编码有着严格的标准，对于MVT格式来说，其标准是开源的切片标准，具体的标准格式可以参考标准文档，在这里我只对瓦片绘制的方式进行简要说明，矢量瓦片中的几何数据被定义为按照屏幕坐标绘制的形式，其中几何图形被简单的编码为指令和参数的形式（这里有点类似SVG文件但是又不太一样），具体的指令包括MoveTo，LineTo以及ClosePath，每一个指令被映射为一个编码，这样将数和ID映射到一个INT类型的数据中，其中最后3bit标识指令，前29bit标识指令执行次数，参数的编码和解码方式为：<br>$$<br>ParameterInteger = (value &lt;&lt; 1) ^ (value &gt;&gt; 31)\ value = ((ParameterInteger &gt;&gt; 1) ^ (-(ParameterInteger \&amp; 1)))<br>$$<br>得到编码和解码方式之后就可以通过一个数组来表示一个几何对象，对于不同的对象需要的操作是不同的，另外需要注意的是数据的编码是采用相对坐标的形式，每一个要素的后面数据点的坐标都是相对于前一个点来计算的，第一个点的坐标是相对于（0，0）点来计算的。<br>&nbsp;&nbsp;&nbsp;&nbsp;要素属性被编码为tag字段中的一对对整数。在每对tag中，第一个整数表示key在其所属的layer的keys列表的中索引号（以0开始）。第二个整数表示value在其所属的layer的values列表的中索引号（以0开始）。一个要素的所有key索引必须唯一，以保证要素中没有重复的属性项。每个要素的tag字段必须为偶数。要素中的tag字段包含的key索引号或value索引号必须不能大于或等于相应图层中keys或values列表中的元素数目。</p><h2 id="矢量切片生成方式"><a href="#矢量切片生成方式" class="headerlink" title="矢量切片生成方式"></a>矢量切片生成方式</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;矢量切片有很多生成方式，在这里我只介绍通过ArcGIS进行矢量切片数据的方式，ArcGIS在10.4以后就支持发布和切矢量切片了，其具体步骤为：<br>在ArcGIS Pro中构建矢量切片：  </p><ul><li>开启 ArcGIS Pro 并打开包含要发布的地图的工程。</li><li>请确保您的门户连接处于活动状态，且您已使用具有创建内容和发布托管切片图层权限的帐户登录到您的组织。</li><li>要发布切片图层，请执行以下操作之一：在内容窗格中选择这些图层。右键单击选择集，然后单击共享为 Web 图层。要在地图中发布所有图层，请在共享选项卡的共享为组中单击 Web 图层，然后单击发布 Web 图层。</li><li>输入切片图层的名称。图层默认保存到我的内容中。您可以通过输入子文件夹名称或浏览已有的文件夹将图层保存到我的内容的子文件夹中。</li><li>选择复制所有数据。</li><li>在图层类型中选择切片。这样会自动取消选中其他图层类型选项，因为复制数据时仅可选中一个选项。</li><li>提供切片图层的摘要和标签。</li><li>请指定应该访问托管切片图层的用户。发布的所有图层都会自动共享到您的组织内的个人工作空间中（我的内容），并选择共享的用户。</li><li>单击配置，然后单击配置 Web 图层属性按钮以指定缓存设置。</li><li>选择切片方案。</li><li>调整并拖拽细节层次条块来为您的切片图层指示最小和最大比例。在您更改最小和最大比例时，生成缓存的估计大小会发生改变。</li><li>选择构建切片缓存的时间和位置。</li><li>要允许用户下载地图切片以供离线使用，请选中允许客户端导出缓存切片。</li><li>如果选中了允许客户端导出缓存切片，请使用导出限制为字段指定客户端一次可离线使用的最大切片数量。</li><li>请单击内容选项卡来确认切片图层将会包含您所需的数据图层。</li><li>请单击分析来检查错误或故障。</li><li>解决错误和某些警告后，单击发布 。</li></ul><p>除了通过ArcGIS Pro构建和发布矢量切片外还可以通过ArcGIS Server通过要素服务发布和构建矢量切片，具体的方法参考<a href="https://enterprise.arcgis.com/zh-cn/portal/latest/use/publish-tiles.htm#ESRI_SECTION1_D7F82432E5DD479DA47B4C9DD657610E" target="_blank" rel="noopener">ArcGIS 官方文档</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;矢量数据则是试图利用点、线、面等几何要素来表现这个世界，其数据结构紧凑精准，数据图形质量好，有利于地理信息检索与网络传输等。其中矢量数据的最小单元是以点的形式存在，点构成线，线组成面，面构造出体。随着WebGIS的发展，对于数
      
    
    </summary>
    
      <category term="学习" scheme="http://www.wuweiblog.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ArcGIS开发" scheme="http://www.wuweiblog.com/tags/ArcGIS%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>得到什么，放弃什么</title>
    <link href="http://www.wuweiblog.com/2019/09/28/%E5%BE%97%E5%88%B0%E4%BB%80%E4%B9%88%EF%BC%8C%E6%94%BE%E5%BC%83%E4%BB%80%E4%B9%88/"/>
    <id>http://www.wuweiblog.com/2019/09/28/得到什么，放弃什么/</id>
    <published>2019-09-28T01:05:07.000Z</published>
    <updated>2019-08-20T01:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;前几天的时候看渡鸦的故事，渡鸦是一种以腐食为主的动物，故事说渡鸦发现了一只死去的河马，但是他们的喙无法啄开河马坚硬的皮肤，所以他们去找来鬣狗帮助，鬣狗过来之后渡鸦们就在边上等候，等待把河马坚硬的皮咬开，并且吃饱之后再过去吃鬣狗们剩下的内脏等。本身这个故事并没有什么，就是说渡鸦其实是一种智商很高的生物，它们不仅会使用工具甚至会利用和训话其他动物。当然让我触动的不是他们多高的智商，毕竟作为人类，我们已经是这个星球上智商最高的动物了，让我感慨的是渡鸦们很清楚自己需要什么，自己应该放弃什么，这个其实是很难得的。<br>&nbsp;&nbsp;&nbsp;&nbsp;以前看电影的时候有句台词说小孩才做选择，成年人就会说我都要，当时觉得这句话很牛逼，把这句话奉为圭臬然后还自以为掌握了这个成年人世界的真相了，但是当自己被生活强奸了两年之后我发现，电影毕竟是电影，它不能代表这个社会运转的真相，没有人能够都要，不管是成年人还是小孩都会面临很多的选择。而在选择中我们更重要的是学会放弃，排队的时候总是觉得别人的队排的比较快，但是当我们换一个队后又发现自己原来的队突然加快了速度，这是多么痛的领悟～。我都要是本能，我们当然都希望自己能够得到所有的好东西，说出我都要这件事请并不丢人，但是我们内心应该明白，这是一件不可能的事情。<br>&nbsp;&nbsp;&nbsp;&nbsp;在这么纷繁复杂的社会中，既然无法什么都要，那我们的选择就变得十分重要了，我们自己是否真的明白我们所需要的是什么，我们真正热爱的是什么，我们能够放弃什么，我们放弃的东西是否从长久来看确实是啊没有什么意义的，我们面临生活，面临工作，面临婚姻的时候，这些都是我们所需要思考的，我们无法获得完美的生活，无法找到完美的工作，无法找到完美的伴侣，所以我们得学会放弃。<br>&nbsp;&nbsp;&nbsp;&nbsp;说起来好像大家都明白，其实做起来却并不是那么容易，毕竟对于大多数人来说损失所带来的痛苦远远大于获得所带来的快乐，所以我们一定是会讨厌放弃，厌恶失去。前几天看完了安全感这本书，从书中学到了很多，也有了很多反思，也对自己的一些行为和想法有了新的认识。阻碍我们放弃的原因有很多，但是放弃带来的不安一定是其中一个重要的原因，总是会幻想另外的路上有不一样的风景，所以我们在挣扎，在纠结，我们失去了很多快乐。为了能够更加坦荡的进行选择和放弃，我们首先要明白自己在内心深处到底希望什么，我们希望忙碌而充实的生活，在普通的岗位上默默奉献？或者我们喜欢漂泊与自由，我们能够并且愿意去体会接受变化无常，又或者我们就喜欢在我们生长的地方，与父母为伴过着悠闲的生活？每一种生活状态都有着它的美好与艰难，我们要明白自己内心到底希望的是什么，然后坚定自己的选择。以前的时候我觉得口号什么的很空洞，但是随着年龄和阅历的增长，我觉得也许对于那些大人物来说，口号不仅仅是空洞的口号，而是真正需要坚持的东西吧！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前几天的时候看渡鸦的故事，渡鸦是一种以腐食为主的动物，故事说渡鸦发现了一只死去的河马，但是他们的喙无法啄开河马坚硬的皮肤，所以他们去找来鬣狗帮助，鬣狗过来之后渡鸦们就在边上等候，等待把河马坚硬的皮咬开，并且吃饱之后再过去吃鬣狗
      
    
    </summary>
    
      <category term="随感" scheme="http://www.wuweiblog.com/categories/%E9%9A%8F%E6%84%9F/"/>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>瞎扯什么</title>
    <link href="http://www.wuweiblog.com/2019/09/18/%E7%9E%8E%E6%89%AF%E4%BB%80%E4%B9%88/"/>
    <id>http://www.wuweiblog.com/2019/09/18/瞎扯什么/</id>
    <published>2019-09-18T12:30:07.000Z</published>
    <updated>2019-08-12T05:34:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;在去江门的路上，由于没有赶上七点的那一班车，所以只能坐晚上八点半的车，以前的时候特别不喜欢出差，因为家里养了一条菜包狗，狗子很黏人，如果出差几天不回来的话就会害怕，所以我都不太愿意出差，即使出差也想着能够早一点回家，后来狗子也不在了，一个人生活了有一段时间，在这段时间内实际上家对我来说也就是晚上一个过夜的地方而已，这一段时间对出差还是挺喜欢的，毕竟住酒店比家里要住的舒服，而且出差还有补贴能够挣点钱。其实我也没有变，事情也没有变，但是对于出差的看法变得不一样了，这其实也是挺有意思的事情。<br>&nbsp;&nbsp;&nbsp;&nbsp;其实一个人坐在车上的时候就能够比较仔细的思考问题，对于我们自己，对于事情，对于各种各样的事情都有一些不一样的看法，听了一个脱口秀是关于孤独的，我觉得讲的还挺有意思的，我们在这诺大的城市里面，几千万的人群中，说实话不应该感到孤独，但是那个故事让我记忆很深刻，一个看坟的人，家里停电了，手机也没有电了，在茫茫的坟地里，漆黑的夜晚，他此时此刻最想的事情和最害怕的事情就是有人跟他说说话。多么有趣的故事，多么矛盾的心里。其实我们在这个几千万人的茫茫城市中所面临的大概也是同样的问题吧，我们多么想能够找人说说话，可是又多么害怕有人说说话。<br>&nbsp;&nbsp;&nbsp;&nbsp;我有时候在想，我爸妈他们在我这个年纪的时候在做什么，在想什么，他们会不会跟我一样也感觉到这么大的压力，这么困惑。每次打电话回家的时候其实都想问这个问题，但是好像又问不出口，每次跟他们想要说这个问题的时候他们总是觉得我矫情，似乎好像我现在拿着不错的薪资，又有了自己的房子，一切似乎都这么的好，似乎比他们当年幸福百倍，没到这个时候我总是无法接话，我不知道该怎么跟他们解释这个问题，好像他们说的也对，但是跟我自己的体会还是有比较大的差距。到底是我自己的体会是对的呢还是他们的看法是对的呢？这原来也是一个问题，<br>&nbsp;&nbsp;&nbsp;&nbsp;有时候想想说有钱真好，可以做自己喜欢做的事情，可是如果真的让我有钱了，又有什么事情是我能够坚持一生喜欢做的事情呢？或者我还没有做好有钱的准备？不过我觉得普通人也挺好，以前的时候爱做梦，总是希望梦到自己一夜暴富或者额突然家里很有钱，但是这个前提是我依然是我，我依然是按照我现在的生活过这一生，其实想想我对自己现在的生活好像也挺满意的，只是有好像缺了点啥一样，真是有点奇怪。有时候在想，其实写代码也算是一种创造性的工作了吧，毕竟水染我写的代码可能不够好，总是这个世界上独一无二的一段代码，总是包含了我对一个事情的理解，其中还是有些快乐的吧。<br>&nbsp;&nbsp;&nbsp;&nbsp;这两天听到我们这个业主升职了，其实我心里还是很开心，由衷的开心，因为这个业主是一个技术型的人，而不是一个管理型的人，这样的人能够得到认可，能够升职其实说明我们这个评价体系还是比较好的，这对我来说应该是一个巨大的鼓舞。有时候挺羡慕梓萌，虽然她也跟我有过吐槽，实际上其实在我眼里她是一个很幸福的人，有些时候她跟我吐槽或者我跟她说我以前打工或者做社团的经历的时候她可能只是觉得有趣，而当时的我是确确实实需要去打工挣钱，毕竟人类的悲喜并不相同。我们很难真正设身处地的想着别人，不过我们起码应该尊重别人的努力和坚持。以前看到过一篇文章《我努力了二十年才能跟你们一样坐在星巴克喝咖啡》其实我想说的是，我差不多也努力了二十年才能呢跟你们一样安心坐在星巴克不喝咖啡。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在去江门的路上，由于没有赶上七点的那一班车，所以只能坐晚上八点半的车，以前的时候特别不喜欢出差，因为家里养了一条菜包狗，狗子很黏人，如果出差几天不回来的话就会害怕，所以我都不太愿意出差，即使出差也想着能够早一点回家，后来狗子也
      
    
    </summary>
    
      <category term="随感" scheme="http://www.wuweiblog.com/categories/%E9%9A%8F%E6%84%9F/"/>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>早起杂感</title>
    <link href="http://www.wuweiblog.com/2019/09/12/%E6%97%A9%E8%B5%B7%E6%9D%82%E6%84%9F/"/>
    <id>http://www.wuweiblog.com/2019/09/12/早起杂感/</id>
    <published>2019-09-11T22:02:07.000Z</published>
    <updated>2019-08-07T18:30:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;今天起的特别早，也不知道为什么感觉起来之后好像就没有了睡意，其实昨晚睡的也并不算早。不过早起还是有好处的，最主要的好处就是有时间在这里胡思乱想。最近总是又能看到一些关于90后的话题甚嚣尘上，其实我在想，我们90后到底做错了什么需要引起如此广泛的关注，其实不过都是自媒体们在吃蘸着人血的馒头而已。为什么一定要给某一些人强行钉上那些有的或者是没有的标签呢，每一个人都有各自的艰辛，只不过这其中的种种事情不足为外人道而已。<br>&nbsp;&nbsp;&nbsp;&nbsp;前两天给小鹏哥打了个电话，跟小鹏哥一起聊聊天感觉很开心，小鹏哥好像也挺有心事的，我想恐怕结婚生小孩儿之后的生活虽然幸福但是也难免面临着一些不愉快吧，其实我也有思考，我们究竟应该一个人生活还是有一个家庭，每当我想到这些的时候我就觉得，其实有个人陪着一起生活也是一个不错的选择。我自己并不是一个多么特立独行的人，很早就明白其实自己只是一个普通人而已，我只想做一些普通的事情，随着人群其实也挺好。以前看书的时候看到那本《乌合之众》，了解到群体无意识，当时还觉得自己应该做一个与众不同的人，而不是在人群中做一个行尸走肉，但是随着年龄慢慢增长，这样的想法也越来越淡。正如跟几个师兄聊天的时候所说，其实到了工作中才发现，工作真的就是为了糊口而已，而更加努力的工作只是因为有一种需要把事情做好的责任感而已，我们并没有谈论理想的奢望。<br>&nbsp;&nbsp;&nbsp;&nbsp;所以最近总是努力的将工作和生活分开，以前的时候我对把工作和生活分开这样的说法是很排斥的，可是现在我却深以为然，确实应该将工作和生活分开，否则会感觉到太压抑，由此影响到正常的生活。仔细想想其实我们工作的目的不过就是为了好好生活而已，可是到底什么才是好好生活，这确实是一件很值得思考的问题，起码至少有两种生活态度，应该随心所欲还是十分自律，有时候感觉很矛盾，而这个矛盾的根源在于我们作为人，并不是独立于社会而存在的，我们无时无刻不生活在他人的眼光和生活之中，或者至少生活在我们父母亲人的眼光之中，而作为一个社会性的人，我们就不得不考虑他人的看法，由此我们就需要平衡自我与他人的关系，我们想要吃垃圾食品，因为吃起来爽，我们又想要一个好身材能得到众人的认可；我想要瘫倒在家当咸鱼，但是又不得不面临大家异样的目光，所以我们必须在这两个矛盾之中进行选择，学会调和。<br>&nbsp;&nbsp;&nbsp;&nbsp;如果矛盾在于此其实也就不难理解为什么90后这一代人的矛盾特别大，我们的成长伴随着自我意识的醒觉和社会联系方式的转变，一方面受教育程度的提高与独生子女的政策让我们自我意识得到了提高，另一方面，随着互联网的发展我们的社会属性也得到了空前的加强，由此而带来的矛盾便一直存在。可能今天起的比较早，想的东西也比较杂，差不多快到上班时间了，还是收拾收拾了去上班吧。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;今天起的特别早，也不知道为什么感觉起来之后好像就没有了睡意，其实昨晚睡的也并不算早。不过早起还是有好处的，最主要的好处就是有时间在这里胡思乱想。最近总是又能看到一些关于90后的话题甚嚣尘上，其实我在想，我们90后到底做错了什么
      
    
    </summary>
    
      <category term="随感" scheme="http://www.wuweiblog.com/categories/%E9%9A%8F%E6%84%9F/"/>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>好好生活</title>
    <link href="http://www.wuweiblog.com/2019/09/02/%E5%A5%BD%E5%A5%BD%E7%94%9F%E6%B4%BB/"/>
    <id>http://www.wuweiblog.com/2019/09/02/好好生活/</id>
    <published>2019-09-02T14:19:07.000Z</published>
    <updated>2019-08-03T14:23:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;很多时候我都在说要好好生活，但是其实到底怎么样才是好好生活，到现在也没有搞清楚。很久没有看书了，最近去广州局上班，每天通勤时间太长，每次都是在车上睡觉，其实我想着能在车上处理一些杂事，但是事实证明在车上除了睡觉其实啥也干不了，因为特别累，所以也就放弃干点别的事情的想法专心睡觉了。以前菲总说通勤时间超过一个小时，得抑郁症的几率会上升，对此我深以为然，在广州局工作确实感觉到人变得抑郁了很多，不过我觉得我的自我调节能力还是比较强的，总是能够在生活中找到一点点的乐趣，不然确实挺难受的。<br>&nbsp;&nbsp;&nbsp;&nbsp;其实最近一直觉得有点奇怪，觉得焦虑，但是说不出原因，后来我大概想明白了，其实我焦虑的主要原因是我没有学会放弃一些东西。说白了生活中总是会面临很多的选择，如果什么都想要可能什么都得不到。所以最近一直都想着要把工作和生活给分开，而这么做的第一步就是不把工作带回家，以前的时候总是想着能够在家里工作，所以不管是在公司还是在家都想着要干活，但是在家一般都干不了活，总是陷入深深的焦虑当中，事实证明，如果能够放下这样的自责和焦虑，整个人会轻松很多。这样玩起来也不会觉得有负罪感，更重要的一点是通过这样的做法，在工作中能够使自己更加集中精神去工作，因为没有回家再做这个选项，所以在工作中能够更深入的思考工作的优先顺序，同时也能够更快速的完成工作，总的来说这个选择目前来看应该是没有问题的。不过生活也并不是总是设计好的，很多时候难免会有些遗留的工作，也许应该想个法子才好，不过起码目前没有这样的问题了。<br>&nbsp;&nbsp;&nbsp;&nbsp;有时候我也在想，为啥自己总是间歇性努力，间歇性抽风，感觉好像没有持续很长时间努力学习工作的动力，我想到了自己读书和考研的时候，那个时候挂科了说要考的时候，感觉已经到了世界末日了，但是随着自己慢慢的进入复习又感觉其实一切都还挺好的，所以那个时候我就开始弄清楚一个道理，其实当前我们所困惑和在意的东西其实以后可能回过头来看，也并没有那么重要。但是对于我们自己来说什么事情是最重要的呢？我觉得应该算理想，或者说是梦想了吧，我仔细想想好像自己压力也不应该这么大，毕竟也不是到了吃不上饭的时候，那更重要的应该是生活的追求了吧，我想以后大家也都会这样，我们热爱生活，享受生活，这个才是生活的真谛，如果我们都不热爱生活了，那么工作得再好钱挣的再多好像也是意义不大，毕竟如果生活都没有了，工作能给我们提供什么呢？</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;很多时候我都在说要好好生活，但是其实到底怎么样才是好好生活，到现在也没有搞清楚。很久没有看书了，最近去广州局上班，每天通勤时间太长，每次都是在车上睡觉，其实我想着能在车上处理一些杂事，但是事实证明在车上除了睡觉其实啥也干不了，
      
    
    </summary>
    
      <category term="随感" scheme="http://www.wuweiblog.com/categories/%E9%9A%8F%E6%84%9F/"/>
    
    
      <category term="随感" scheme="http://www.wuweiblog.com/tags/%E9%9A%8F%E6%84%9F/"/>
    
  </entry>
  
  <entry>
    <title>狗子日记十一月四号</title>
    <link href="http://www.wuweiblog.com/2019/09/02/%E7%8B%97%E5%AD%90%E6%97%A5%E8%AE%B0%E5%8D%81%E4%B8%80%E6%9C%88%E5%9B%9B%E5%8F%B7/"/>
    <id>http://www.wuweiblog.com/2019/09/02/狗子日记十一月四号/</id>
    <published>2019-09-01T16:30:05.130Z</published>
    <updated>2017-11-05T14:28:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>下午的时候刘艳在家打扫卫生，她突然很激动的跟我说：＂我捡到了一粒黑色的扣子！＂<br>我表示一脸茫然，怎么会有黑色扣子，难道是哪件衣服上掉的？于是我说：＂黑色扣子，怎么会有黑色扣子？＂<br>随后又传来一声尖叫:”啊～～～！”<br>把我吓了一跳，＂怎么啦！＂我赶紧问．然后出去看看发生了啥.<br>她看到我出来又很激动的跟我说：＂那个不是黑色的扣子，那个是菜包的屎，沾上了它的毛～气死我啦！＂<br>于是我们转头看向菜包，正趴在地上的菜包感觉到了我们两个人充满杀气的目光突然惊恐的站了起来：＂你们要干啥！你们不要这么看着本大王~＂<br>于是我们开始质问:”菜包，你怎么把你的粑粑弄到客厅来了~”<br>菜包一脸茫然：＂你在说什么，我完全听不懂的样子!＂<br>我们满头黑线:”….你又在装，看来每天不揍你你就不舒服呀！”，于是我抄起了我的拖鞋．<br>菜包吓得赶快翻肚皮：＂我冤枉呀～，我真的什么都不知道，你们就是打死我也没有用呀~＂<br>本着宁可错杀一千不能放过一个的原则，我们依然把菜包揍了一顿，然后心满意足的回房间了.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;下午的时候刘艳在家打扫卫生，她突然很激动的跟我说：＂我捡到了一粒黑色的扣子！＂&lt;br&gt;我表示一脸茫然，怎么会有黑色扣子，难道是哪件衣服上掉的？于是我说：＂黑色扣子，怎么会有黑色扣子？＂&lt;br&gt;随后又传来一声尖叫:”啊～～～！”&lt;br&gt;把我吓了一跳，＂怎么啦！＂我赶紧问．然后
      
    
    </summary>
    
      <category term="小说" scheme="http://www.wuweiblog.com/categories/%E5%B0%8F%E8%AF%B4/"/>
    
    
      <category term="狗子日记" scheme="http://www.wuweiblog.com/tags/%E7%8B%97%E5%AD%90%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>不读书（八）</title>
    <link href="http://www.wuweiblog.com/2019/08/20/%E4%B8%8D%E8%AF%BB%E4%B9%A6(%E5%85%AB)/"/>
    <id>http://www.wuweiblog.com/2019/08/20/不读书(八)/</id>
    <published>2019-08-20T03:38:44.000Z</published>
    <updated>2019-08-20T11:24:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;最近看完了这两本书，其中《中国经济2019》我是听完的，第二本书是一本小说，也只是走马观花的看了一遍。总是感觉很多时候都没有心思去看书，长时间专注的做一件事情了，这样的感觉越发的强烈，跟很多人聊天的时候发现他们也有差不多的感觉。归根结底其实是由于时代的进步，智能设备的应用导致我们的精力被严重分散，那些应用，那些游戏和App，所有的这一切都是为了抢占我们的有效时间。所以那些披着精致外衣的App，他们所给我们带来的可能不不是我们想要的，那些抢占我们时间的只是一些让我们沉迷其中的奶头乐而已。<br>&nbsp;&nbsp;&nbsp;&nbsp;以上的感慨跟我这段时间读的书都没有什么关系，主要是一直在感觉自己变得功利，无法集中精神去做某一件事情，这样的感觉让我很难受。这段时间主要读了以上两本书，如果让我做一个推荐的话我估计两本书都不会推荐，其实两本书都是那种低密度信息量的书，第一本《中国经济2019》原以为能够有一些好的见解或者是看法，但是实际上这本书让我很失望，这本书只是一本总结性的书籍，书中总结了很多2018-2019年以来的大事件，对于互联网经济，房价，贸易战等诸多的政治经济大事件都有很详细的描述和总结，也罗列了很多数据，但是实际上并没有太多的思想与见解，通过这本书也只是能够对中国经济有一个数字或者宏观事件上的认识，作为一个经济报告，实际上并没有太多能够引起人兴趣的地方，如果想要了解一下2018-2019年大事件，这本书当然是一个很不错的选择，但是除此之外好像感觉不到这本书的其他作用了，仅仅是作为谈资而已吧。不过可能实际上宏观经济情况本来就不是有多么强的规律，看不见的手与看的见的手相互作用下几乎没有哪个经济学家能够对宏观经济做出准确的判断，所以作者只是列出类似报告一样的东西也是能够理解的吧。总的来说这本书是数据和内容很丰富，但是思考的不够深入，没有能够提出有见地的思想。<br>&nbsp;&nbsp;&nbsp;&nbsp;其实我倒是很想好好看一些小说，但是又总是觉得看小说既浪费时间又没有太大的意义，我觉得这恐怕也是功利心的体现吧，不过还是花钱买了本《时间的答案》这本电子书，当初买这本书是因为本书的作者好像也是一个三十不到的年轻人，我想看看他们的生活与感悟也许会对自己的有些帮助吧，书介绍了作者大学生活，不得不说其实看完还是有些失望。虽然好像年龄差不多，但是感觉好像他们的烦恼和想法也与我相去甚远，甚至与我周围的人的想法也想去甚远，有时候我都怀疑人家与我过的是不是同一种生活。还是说其实是因为家庭条件的原因，所以我们的想法和选择会有很大的区别。回到这本书上，也许作者是想表达对人生选择的思考，但是很多事情在我看来都太过矫情，很多说教和道理都太过空洞，让人无法接受。不过也许是因为我年龄已经到了这个年纪，我想一个快三十多岁的人，当他面临这社会的压力的时候很多关于爱情，关于选择的问题就会简单很多，或者说其实我们没有什么选择，又或者说其实我们认识到其实自己没有什么选择，也许对一个刚进大学，或者是还在高中憧憬大学生涯的小朋友们来说是一本不错的书，可惜对于我，它晚来了十年。不过这个书名倒是挺有意思的，“时间的答案”，所有问题时间都会给出一个答案，好的或坏的，我们除了接受其实并没有什么很好的办法。生活其实是需要智慧和清醒认识的，我以前发了一个状态叫“不忘初心”，以前一直觉得这样的口号是多么的空洞，但是随着有了一点点生活的阅历，我渐渐发现这句话其实是很接地气的一句话，我们每一个人，步入这个社会的时候总是对自己有一个认识和定位，这个我们暂且叫初心吧，然后随着我们在这个社会中的成长，初心就渐渐的好像配不上我们的职位了，但是其实说到底我们只是见多了一些人，做多了一些事情，然后多了很多欲望，所以我们总是会以为现在的自己要强于以前的自己，实际上可能正是因为多了这么多的Title，多了这么多外在的东西，我们对自己的认识反而变得模糊了，所以不忘初心其实真的很重要。<br>&nbsp;&nbsp;&nbsp;&nbsp;说了这么多东西，感觉又像啥都没说，不过相比于以前，现在应该算得上是好了很多，我渐渐的开始重视生活了，我想只要我开始重视生活了，我应该就能够渐渐的好好生活吧。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近看完了这两本书，其中《中国经济2019》我是听完的，第二本书是一本小说，也只是走马观花的看了一遍。总是感觉很多时候都没有心思去看书，长时间专注的做一件事情了，这样的感觉越发的强烈，跟很多人聊天的时候发现他们也有差不多的感觉
      
    
    </summary>
    
      <category term="书评" scheme="http://www.wuweiblog.com/categories/%E4%B9%A6%E8%AF%84/"/>
    
    
      <category term="中国经济2019,时间的答案" scheme="http://www.wuweiblog.com/tags/%E4%B8%AD%E5%9B%BD%E7%BB%8F%E6%B5%8E2019-%E6%97%B6%E9%97%B4%E7%9A%84%E7%AD%94%E6%A1%88/"/>
    
  </entry>
  
  <entry>
    <title>酷炫的动态图</title>
    <link href="http://www.wuweiblog.com/2019/07/21/%E9%85%B7%E7%82%AB%E7%9A%84%E5%8A%A8%E6%80%81%E5%9B%BE/"/>
    <id>http://www.wuweiblog.com/2019/07/21/酷炫的动态图/</id>
    <published>2019-07-21T04:14:37.000Z</published>
    <updated>2019-07-21T04:37:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;以前总是看到别人开发的GIS软件上有很多酷炫的效果，虽然没有什么实际上的功能，但是看起来真的是很酷炫了，有时候自己就想怎么才能做到这么酷炫的效果呢，直到我遇到Echart这个图标工具，通过这个图标工具就可以做到很酷炫的动态图效果了，通过合适的动态图效果能够为我们软件增色不少。<br>&nbsp;&nbsp;&nbsp;&nbsp;首先我们需要一个js控件，叫eschartLayer.js可以直接放入ArcGIS SDK进行应用，也可以配置dojo进行引用，具体的引用方法在这里就不进行介绍了，在这里主要介绍一下这个控件的思路，具体的做法就是在地图层之上添加一个Div的遮罩层，这一层为Echart图表，然后坐标为当前数据显示范围，然后在这个基础上进行绘制，；利用Echart的图标添加各种动态效果，实际上动态效果就是根据Echart的配置功能进行配置，通过这样的方式实现地图动态效果的叠加。我们首先可以参看这个控件的<a href="https://github.com/slobber/arcgis-4-with-echarts-4" target="_blank" rel="noopener">Github地址</a>,通过他的例子可以看到一些迁徙图的动态效果，但是这些迁徙图动态效果都是点与点之间的，那么基于这个东西我就在思考，能不能做一个将ArcGIS Feature Layer转换为可展示数据的功能呢，为了实现这个目标，我写了两个函数:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  数据转换方法，将查询到的Feature数据转换为Echart图表展示的形式</span></span><br><span class="line"><span class="comment">*  将Feature数据转换为Echart能够展示的点图层数据进行展示</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FeaturesConvertToPoints</span>(<span class="params">features,type</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data=[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;features.length;++i)&#123;</span><br><span class="line">    <span class="keyword">if</span>(features[i].geometry.type==<span class="string">'point'</span>)&#123;</span><br><span class="line">        data.push(&#123;</span><br><span class="line">        type:type,</span><br><span class="line">        value:[features[i].geometry.longitude,features[i].geometry.latitude]</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span>(features[i].geometry.type==<span class="string">'polygon'</span>)&#123;</span><br><span class="line">        data.push(&#123;</span><br><span class="line">        type:type,</span><br><span class="line">        value:[features[i].geometry.centroid.longitude,features[i].geometry.centroid.latitude]</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  数据转换方法，将查询到的Feature数据转换为Echart图表展示的形式</span></span><br><span class="line"><span class="comment">*  将Feature数据转换为Echart能够展示的线数据</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FeatureConvertToLines</span>(<span class="params">features</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data=[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;features.length;++i)&#123;</span><br><span class="line">    <span class="keyword">if</span>(features[i].geometry.type==<span class="string">'polyline'</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> paths = features[i].geometry.paths;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;paths.length;++j)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> k=<span class="number">0</span>;k&lt;paths[j].length<span class="number">-1</span>;++k)&#123;</span><br><span class="line">            data.push(&#123;</span><br><span class="line">            fromName:<span class="string">""</span>,</span><br><span class="line">            toName:<span class="string">""</span>,</span><br><span class="line">            coords:[paths[j][k],paths[j][k+<span class="number">1</span>]]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>&nbsp;&nbsp;&nbsp;&nbsp;其实上面两段代码都比较简单，第一段代码是将点和面数据转换为Echart能够显示的散点图的散点信息，第二段代码为将线数据转换为可展示的线段的信息，在这里就要说一下ArcGIS的线数据存储格式了，线数据是按照Feature-&gt;paths-&gt;Points这个层级关系来进行存储的，首选获取Feature，然后获取Paths以及之下的点数据，为了实现点数据转换为Echart的格式，需要将点数据进行一些转换，然后在Echart中的Series的数据中对数据进行添加，展示效果为：<br><img src="https://blogimage-1251632003.cos.ap-guangzhou.myqcloud.com/%E7%BA%BF%E8%B7%AF%E5%8A%A8%E6%80%81%E5%B1%95%E7%A4%BA.gif" alt="动态线路数据展示">,如果大家有什么疑问也可以留言，大家一起探讨一下GIS数据的酷炫展示方式。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;以前总是看到别人开发的GIS软件上有很多酷炫的效果，虽然没有什么实际上的功能，但是看起来真的是很酷炫了，有时候自己就想怎么才能做到这么酷炫的效果呢，直到我遇到Echart这个图标工具，通过这个图标工具就可以做到很酷炫的动态图效
      
    
    </summary>
    
      <category term="学习" scheme="http://www.wuweiblog.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ArcGIS开发" scheme="http://www.wuweiblog.com/tags/ArcGIS%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>激光点云数据三视图生成</title>
    <link href="http://www.wuweiblog.com/2019/07/02/%E6%BF%80%E5%85%89%E7%82%B9%E4%BA%91%E6%95%B0%E6%8D%AE%E4%B8%89%E8%A7%86%E5%9B%BE%E7%94%9F%E6%88%90/"/>
    <id>http://www.wuweiblog.com/2019/07/02/激光点云数据三视图生成/</id>
    <published>2019-07-02T09:17:55.000Z</published>
    <updated>2019-07-02T09:17:56.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>视差理解</title>
    <link href="http://www.wuweiblog.com/2019/05/26/%E8%A7%86%E5%B7%AE%E7%90%86%E8%A7%A3/"/>
    <id>http://www.wuweiblog.com/2019/05/26/视差理解/</id>
    <published>2019-05-26T07:17:57.000Z</published>
    <updated>2019-06-03T09:45:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;&nbsp;&nbsp;为了说明什么是视差我特意画了下面一张图，虚线为辅助线，为了方便理解和计算，其中X为物方坐标，也就是空间中的一个点，Z为深度，f为焦距，对于点X在像平面上成的点分别为 $x$ 与 $x’$如下图：<br><img src="https://blogimage-1251632003.cos.ap-guangzhou.myqcloud.com/%E8%A7%86%E5%B7%AE%E7%A4%BA%E6%84%8F%E5%9B%BE.JPG?q-sign-algorithm=sha1&q-ak=AKIDKw07A0GWOXesL566U946vBTGY67TVRYl&q-sign-time=1558881330;1558883130&q-key-time=1558881330;1558883130&q-header-list=&q-url-param-list=&q-signature=74dcaf81ca045b8ce0bbc9d68ad28e16c17a0dee&x-cos-security-token=3897917274b469b893340d494453c417680cdd6410001">  </p><h2 id="1-视差定义与公式"><a href="#1-视差定义与公式" class="headerlink" title="1. 视差定义与公式"></a>1. 视差定义与公式</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;首先说一下视差的定义，我们所说的<a href="https://baike.baidu.com/item/%E8%A7%86%E5%B7%AE/4160990?fr=aladdin" target="_blank" rel="noopener">视差</a>就是从有一定距离的两个点上观察同一个目标所产生的方向差异，我们在摄影测量的视差图中所指的视差通常指的是左右视差而不是上下视差，<a href="https://baike.baidu.com/item/%E5%B7%A6%E5%8F%B3%E8%A7%86%E5%B7%AE/373299" target="_blank" rel="noopener">左右视差</a>为立体像对上同名像点横座标之差，若两个相机已经校正完成即达到极线平行，两条光轴方向也平行。则视差和物体深度的关系式(1)：<br>$$<br>\operatorname{dsparity}^{\prime} y=T_1x-T_2x^{\prime}=\frac{B f}{Z}  (1)<br>$$<br>为了说明式(1)的来历，我们做了一条$OX$的平行线过$O’$则$T_1x=T_2T_3$则根据三角形相似的原理我们可以推导出式(1)，在此基础上，假设视差已知，则深度计算为：<br>$$<br>Z=\frac{B <em> f}{T_1x-T_2x^{\prime}}=\frac{B </em> f}{d} （2）<br>$$<br>其中d为视差值，在成像过程中B与f都是常量，因此深度只与d有关，深度Z与视差d成反比关系，因此可以得出结论：<strong>视差越大则深度越小，则物点距离像平面坐标越近</strong>。</p><h2 id="2-视差计算方法"><a href="#2-视差计算方法" class="headerlink" title="2. 视差计算方法"></a>2. 视差计算方法</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;视差的计算是计算深度图的一个基础，从openCV中有一些部分是专门进行相机标定和视差计算的，我们把视差计算称为<strong>Stereo Matching</strong>，由上面描述的视差的定义与公式中可以了解到，视差的计算实际上有一个基础，那就是两张图像的同名点在同一水平线上，即图像的y坐标相同，为了达到以上效果，在视差计算前我们首先进行极线校正，首先通过sift算子解算得到匹配点，进而解算出影像之间的<a href="https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E4%B8%AD%E7%9A%84%E5%A4%9A%E8%A7%86%E5%9B%BE%E5%87%A0%E4%BD%95/8726537?fr=aladdin" target="_blank" rel="noopener">基础矩阵$F$与本质$E$</a>，注意到我们说的两个矩阵，两个矩阵实际上都是与极线相关的，图像上一个点乘以这个点的本质矩阵可以得到这个点在另一张图像上的极线方程，具体介绍可以参考<strong>计算机视觉中的多视图几何</strong>这本神书，建议阅读英文原版。求出基础矩阵与本质矩阵后就可以进行<a href="http://www.cs.ait.ac.th/~mdailey/cvreadings/Hartley-Rectify.pdf" target="_blank" rel="noopener">极线校正</a>，实际上分两种一种是没有经过内定标采用$F$举证进行的校正，另一种是采用$E$矩阵分接出R和T进行的校正在这里不多说。假设图像已经经过极线校正，则图像的y坐标应该相同，那么我们可以进行视差图计算，在视差图计算的过程中比较重要的一点是进行密集匹配，流行的密集匹配方法有BM方法、SGBM方法、GC方法等，在openCV中实现了前两种，因此我们在这里只讨论前两种方法  </p><h3 id="2-1-BM方法"><a href="#2-1-BM方法" class="headerlink" title="2.1 BM方法"></a>2.1 BM方法</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;BM方法，全称为<strong>Block Matching methods</strong>，方法说起来比较简单，我们可以通过一张示意图来描述：</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;为了说明什么是视差我特意画了下面一张图，虚线为辅助线，为了方便理解和计算，其中X为物方坐标，也就是空间中的一个点，Z为深度，f为焦距，对于点X在像平面上成的点分别为 $x$ 与 $x’$如下图：&lt;br&gt;&lt;img src=&quot;ht
      
    
    </summary>
    
      <category term="数学" scheme="http://www.wuweiblog.com/categories/%E6%95%B0%E5%AD%A6/"/>
    
    
  </entry>
  
</feed>
